/**
 * Copyright (c) 2014, 2015, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojdvt-base","ojs/internal-deps/dvt/DvtDiagram"],function(b,f,a,d,c){b.ya("oj.ojDiagram",f.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{optionChange:null},bg:function(a){this.options._logger=b.r;this.options._templateFunction&&(this.options.renderer=this.OB(this.options._templateFunction));this.options.renderer&&(this.options._contextHandler=this.DI());return this._super(a)},OB:function(a){var b=this;return function(c){var d=document.createElement("div");
d.style.display="none";d.iI=b.eg;b.element.append(d);a({parentElement:d,data:c.data});return(c=d.children[0])&&"http://www.w3.org/2000/svg"===c.namespaceURI?(f(d).remove(),c):c?b.uv(c):null}},DI:function(){var a=this;return function(c,d,f,l,m){return{component:b.Components.sg(a.element),parentElement:c,rootElement:d,data:f,state:l,previousState:m,id:f.id,type:"node",label:f.label}}},renderDefaultHover:function(a){a.previousState&&a.state.hovered==a.previousState.hovered||this.uv(this.element).processDefaultHoverEffect(a.id,
a.state.hovered)},renderDefaultSelection:function(a){a.previousState&&a.state.selected==a.previousState.selected||this.uv(this.element).processDefaultSelectionEffect(a.id,a.state.selected)},renderDefaultFocus:function(a){a.previousState&&a.state.focused==a.previousState.focused||this.uv(this.element).processDefaultFocusEffect(a.id,a.state.focused)},jf:function(a,b,d){return c.DvtDiagram.newInstance(a,b,d)},ai:function(a){var b=a.subId;"oj-diagram-link"==b?b="link["+a.index+"]":"oj-diagram-node"==
b?b="node["+a.index+"]":"oj-diagram-tooltip"==b&&(b="tooltip");return b},$f:function(a){var b={};0==a.indexOf("link")?(b.subId="oj-diagram-link",b.index=this.Ah(a)):0==a.indexOf("node")?(b.subId="oj-diagram-node",b.index=this.Ah(a)):"tooltip"==a&&(b.subId="oj-diagram-tooltip");return b},ye:function(){var a=this._super();a.push("oj-diagram");return a},bi:function(){var a=this._super();a["oj-diagram-node-label"]={path:"styleDefaults/nodeDefaults/labelStyle",property:"CSS_TEXT_PROPERTIES"};a["oj-diagram-node oj-selected"]=
{path:"styleDefaults/nodeDefaults/selectionColor",property:"border-color"};a["oj-diagram-node oj-hover"]=[{path:"styleDefaults/nodeDefaults/hoverOuterColor",property:"border-top-color"},{path:"styleDefaults/nodeDefaults/hoverInnerColor",property:"border-bottom-color"}];a["oj-diagram-link"]={path:"styleDefaults/linkDefaults/color",property:"color"};a["oj-diagram-link-label"]={path:"styleDefaults/linkDefaults/labelStyle",property:"CSS_TEXT_PROPERTIES"};a["oj-diagram-link oj-selected"]={path:"styleDefaults/linkDefaults/selectionColor",
property:"border-color"};a["oj-diagram-link oj-hover"]=[{path:"styleDefaults/linkDefaults/hoverOuterColor",property:"border-top-color"},{path:"styleDefaults/linkDefaults/hoverInnerColor",property:"border-bottom-color"}];return a},di:function(){return["optionChange"]},ei:function(){var a=this.options.translations,b=this._super();b["DvtUtilBundle.DIAGRAM"]=a.componentName;return b},hi:function(a){(a&&a.getType?a.getType():null)===c.DvtSelectionEvent.TYPE?this.gc("selection",a.getSelection()):this._super(a)},
getNodeCount:function(){return this.na.getAutomation().getNodeCount()},getNode:function(a){return this.na.getAutomation().getNode(a)},getLinkCount:function(){return this.na.getAutomation().getLinkCount()},getLink:function(a){return this.na.getAutomation().getLink(a)},getContextByNode:function(a){return(a=this.getSubIdByNode(a))&&"oj-diagram-tooltip"!==a.subId?a:null},ci:function(){return{root:["nodes","links"]}}})});