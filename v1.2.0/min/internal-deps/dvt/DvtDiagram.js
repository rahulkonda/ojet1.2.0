/**
 * Copyright (c) 2014, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(['./DvtToolkit', './DvtPanZoomCanvas'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.
  // Map the D namespace to dvt, which is used to provide access across partitions.
  var D = dvt;
  
D.xp=function(a){this.Init(a)};(0,D.da)("DvtDiagramLayoutContext",D.xp);D.A.q(D.xp,D.A,"DvtDiagramLayoutContext");
D.xp.prototype.Init=function(a){this.tf=a?a.tf:D.o;this.Bn=a?a.Bn:D.o;this.ds=a?a.ds:0;this.aQ=a?a.aQ:0;this.Hr=a?a.Hr:D.p;this.A5=a?a.A5:D.o;this.Fe=a?a.Fe:D.o;this.lv=a?a.lv:D.o;this.Cg=a?a.Cg:D.o;this.ob={};this.Pc={};this.iz=[];this.qO=[];if(a){for(var b=0;b<this.ds;b++){var c=new D.Ap(a.iz[b]);this.iz.push(c);this.ob[c.getId()]=c}for(var d in a.ob)this.ob[d]||(this.ob[d]=new D.Ap(a.ob[d]));for(b=0;b<this.aQ;b++)c=new D.Dp(a.qO[b]),this.qO.push(c),this.Pc[c.getId()]=c;for(var e in a.Pc)this.Pc[e]||
(this.Pc[e]=new D.Dp(a.Pc[e]))}};D.xp.prototype.dn=(0,D.v)("tf");D.xp.prototype.jf=(0,D.y)("tf");D.xp.prototype.getLayout=D.xp.prototype.jf;D.xp.prototype.Xn=(0,D.v)("Bn");D.xp.prototype.lj=(0,D.y)("Bn");D.xp.prototype.getLayoutAttributes=D.xp.prototype.lj;D.xp.prototype.HR=function(a){this.vM(a.getId())||(this.ds++,this.iz.push(a));this.ob[a.getId()]=a};D.xp.prototype.vM=function(a){return this.ob[a]};D.xp.prototype.getNodeById=D.xp.prototype.vM;D.xp.prototype.HD=function(a){return this.iz[a]};
D.xp.prototype.getNodeByIndex=D.xp.prototype.HD;D.xp.prototype.kf=(0,D.y)("ds");D.xp.prototype.getNodeCount=D.xp.prototype.kf;D.tq=function(a,b){a.Tra(b.getId())||(a.aQ++,a.qO.push(b));a.Pc[b.getId()]=b};D.xp.prototype.Tra=function(a){return this.Pc[a]};D.xp.prototype.getLinkById=D.xp.prototype.Tra;D.xp.prototype.ED=function(a){return this.qO[a]};D.xp.prototype.getLinkByIndex=D.xp.prototype.ED;D.xp.prototype.Op=(0,D.y)("aQ");D.xp.prototype.getLinkCount=D.xp.prototype.Op;
D.xp.prototype.gNa=function(a,b){for(var c=b,d=new D.Eq(0,0);c;)if(d.x+=c.jg().x,d.y+=c.jg().y,c=c.lv){if((c=this.vM(c))&&c.mb()){var e=c.Zq();e&&(d.x+=e.left,d.y+=e.top)}}else c=D.o;return new D.Eq(a.x+d.x,a.y+d.y)};D.xp.prototype.localToGlobal=D.xp.prototype.gNa;D.xp.prototype.HMa=(0,D.y)("Hr");D.xp.prototype.isLocaleR2L=D.xp.prototype.HMa;D.xp.prototype.oJa=(0,D.y)("A5");D.xp.prototype.getComponentSize=D.xp.prototype.oJa;D.xp.prototype.nOa=(0,D.v)("Fe");D.xp.prototype.setViewport=D.xp.prototype.nOa;
D.xp.prototype.PD=(0,D.y)("Fe");D.xp.prototype.getViewport=D.xp.prototype.PD;D.xp.prototype.uT=(0,D.v)("lv");D.xp.prototype.Zaa=(0,D.y)("lv");D.xp.prototype.getContainerId=D.xp.prototype.Zaa;D.xp.prototype.kE=function(a,b,c,d){this.lv&&(this.Cg={},"number"===typeof a||"string"===typeof a||(d=a.left,b=a.right,c=a.bottom,a=a.top),this.Cg.top=a,this.Cg.right=b,this.Cg.bottom=c,this.Cg.left=d)};D.xp.prototype.setContainerPadding=D.xp.prototype.kE;D.xp.prototype.Zq=(0,D.y)("Cg");
D.xp.prototype.getContainerPadding=D.xp.prototype.Zq;D.xp.prototype.pJa=(0,D.y)("KJ");D.xp.prototype.getCurrentViewport=D.xp.prototype.pJa;
D.Dp=function(a){this.Init(a)};(0,D.da)("DvtDiagramLayoutContextLink",D.Dp);D.A.q(D.Dp,D.A,"DvtDiagramLayoutContextLink");D.Dp.prototype.Init=function(a){this.ib=a?a.ib:D.o;this.AL=a?a.AL:D.o;this.YJ=a?a.YJ:D.o;this.ji=a?a.ji:D.o;this.YF=a?a.YF:D.o;this.XF=a?a.XF:D.o;this.Bn=a?a.Bn:D.o;this.A$=a?a.A$:0;this.y6=a?a.y6:0;this.gG=a?a.gG:1;this.Re=a?a.Re:D.p;this.Cj=a?a.Cj:D.o;this.Ci=a?a.Ci:D.o;this.gt=a?a.gt:D.p};D.Dp.prototype.setId=(0,D.v)("ib");D.Dp.prototype.getId=(0,D.y)("ib");
D.Dp.prototype.getId=D.Dp.prototype.getId;D.Dp.prototype.jN=(0,D.v)("AL");D.Dp.prototype.pd=(0,D.y)("AL");D.Dp.prototype.getStartId=D.Dp.prototype.pd;D.Dp.prototype.bN=(0,D.v)("YJ");D.Dp.prototype.rc=(0,D.y)("YJ");D.Dp.prototype.getEndId=D.Dp.prototype.rc;D.Dp.prototype.Dc=function(a){this.ji="string"==typeof a?D.K.MR(a):a};D.Dp.prototype.setPoints=D.Dp.prototype.Dc;D.Dp.prototype.Eb=(0,D.y)("ji");D.Dp.prototype.getPoints=D.Dp.prototype.Eb;D.Dp.prototype.$d=(0,D.v)("YF");
D.Dp.prototype.setLabelPosition=D.Dp.prototype.$d;D.Dp.prototype.Id=(0,D.y)("YF");D.Dp.prototype.getLabelPosition=D.Dp.prototype.Id;D.Dp.prototype.Xo=(0,D.v)("XF");D.Dp.prototype.be=(0,D.y)("XF");D.Dp.prototype.getLabelBounds=D.Dp.prototype.be;D.Dp.prototype.yS=(0,D.y)("A$");D.Dp.prototype.getStartConnectorOffset=D.Dp.prototype.yS;D.Dp.prototype.fS=(0,D.y)("y6");D.Dp.prototype.getEndConnectorOffset=D.Dp.prototype.fS;D.Dp.prototype.nE=(0,D.v)("gG");D.Dp.prototype.ew=(0,D.y)("gG");
D.Dp.prototype.getLinkWidth=D.Dp.prototype.ew;D.Dp.prototype.Xn=(0,D.v)("Bn");D.Dp.prototype.lj=(0,D.y)("Bn");D.Dp.prototype.getLayoutAttributes=D.Dp.prototype.lj;D.Dp.prototype.qb=(0,D.v)("Re");D.Dp.prototype.Dba=(0,D.y)("Re");D.Dp.prototype.getSelected=D.Dp.prototype.Dba;D.Dp.prototype.Bw=(0,D.v)("Cj");D.Dp.prototype.setLabelRotationAngle=D.Dp.prototype.Bw;D.Dp.prototype.cw=(0,D.y)("Cj");D.Dp.prototype.getLabelRotationAngle=D.Dp.prototype.cw;D.Dp.prototype.Js=(0,D.v)("Ci");
D.Dp.prototype.setLabelRotationPoint=D.Dp.prototype.Js;D.Dp.prototype.dw=(0,D.y)("Ci");D.Dp.prototype.getLabelRotationPoint=D.Dp.prototype.dw;D.Dp.prototype.rE=(0,D.v)("gt");D.Dp.prototype.Ay=(0,D.y)("gt");
D.Ap=function(a){this.Init(a)};(0,D.da)("DvtDiagramLayoutContextNode",D.Ap);D.A.q(D.Ap,D.A,"DvtDiagramLayoutContextNode");D.Ap.prototype.Init=function(a){this.ib=a?a.ib:D.o;this.Va=a?a.Va:D.o;this.hW=a?a.hW:D.o;this.dD=a?a.dD:D.o;this.YF=a?a.YF:D.o;this.XF=a?a.XF:D.o;this.Bn=a?a.Bn:D.o;this.R4=a?a.R4:D.p;this.lv=a?a.lv:D.o;this.Re=a?a.Re:D.p;this.Cj=a?a.Cj:D.o;this.Ci=a?a.Ci:D.o;this.Cg=a?a.Cg:D.o;this.es=a?a.es:D.o;this.fs=a?a.fs:D.o;this.Ui=a?a.Ui:D.p};D.Ap.prototype.setId=(0,D.v)("ib");
D.Ap.prototype.getId=(0,D.y)("ib");D.Ap.prototype.getId=D.Ap.prototype.getId;D.Ap.prototype.tda=function(a){this.es=this.Va=a};D.Ap.prototype.Hd=(0,D.y)("Va");D.Ap.prototype.getBounds=D.Ap.prototype.Hd;D.Ap.prototype.Yf=(0,D.y)("hW");D.Ap.prototype.getContentBounds=D.Ap.prototype.Yf;D.Ap.prototype.pj=(0,D.v)("dD");D.Ap.prototype.setPosition=D.Ap.prototype.pj;D.Ap.prototype.jg=(0,D.y)("dD");D.Ap.prototype.getPosition=D.Ap.prototype.jg;D.Ap.prototype.$d=(0,D.v)("YF");
D.Ap.prototype.setLabelPosition=D.Ap.prototype.$d;D.Ap.prototype.Id=(0,D.y)("YF");D.Ap.prototype.getLabelPosition=D.Ap.prototype.Id;D.Ap.prototype.Xo=(0,D.v)("XF");D.Ap.prototype.be=(0,D.y)("XF");D.Ap.prototype.getLabelBounds=D.Ap.prototype.be;D.Ap.prototype.Xn=(0,D.v)("Bn");D.Ap.prototype.lj=(0,D.y)("Bn");D.Ap.prototype.getLayoutAttributes=D.Ap.prototype.lj;D.Ap.prototype.Dw=(0,D.v)("R4");D.Ap.prototype.RH=(0,D.y)("R4");D.Ap.prototype.isReadOnly=D.Ap.prototype.RH;D.Ap.prototype.uT=(0,D.v)("lv");
D.Ap.prototype.Zaa=(0,D.y)("lv");D.Ap.prototype.getContainerId=D.Ap.prototype.Zaa;D.Ap.prototype.qb=(0,D.v)("Re");D.Ap.prototype.Dba=(0,D.y)("Re");D.Ap.prototype.getSelected=D.Ap.prototype.Dba;D.Ap.prototype.Bw=(0,D.v)("Cj");D.Ap.prototype.setLabelRotationAngle=D.Ap.prototype.Bw;D.Ap.prototype.cw=(0,D.y)("Cj");D.Ap.prototype.getLabelRotationAngle=D.Ap.prototype.cw;D.Ap.prototype.Js=(0,D.v)("Ci");D.Ap.prototype.setLabelRotationPoint=D.Ap.prototype.Js;D.Ap.prototype.dw=(0,D.y)("Ci");
D.Ap.prototype.getLabelRotationPoint=D.Ap.prototype.dw;D.Ap.prototype.kE=function(a,b,c,d){this.mb()&&(this.Cg={},"number"===typeof a||"string"===typeof a||(d=a.left,b=a.right,c=a.bottom,a=a.top),this.Cg.top=a,this.Cg.right=b,this.Cg.bottom=c,this.Cg.left=d,this.es&&(this.Va=new D.yp(this.es.x,this.es.y,this.es.w+d+b,this.es.h+a+c)),this.fs&&(this.hW=new D.yp(this.fs.x,this.fs.y,this.fs.w+d+b,this.fs.h+a+c)))};D.Ap.prototype.setContainerPadding=D.Ap.prototype.kE;D.Ap.prototype.Zq=(0,D.y)("Cg");
D.Ap.prototype.getContainerPadding=D.Ap.prototype.Zq;D.Ap.prototype.qf=(0,D.v)("Ui");D.Ap.prototype.mb=(0,D.y)("Ui");D.Ap.prototype.isDisclosed=D.Ap.prototype.mb;
D.Eq=function(a,b){this.Init(a,b)};(0,D.da)("DvtDiagramPoint",D.Eq);D.A.q(D.Eq,D.A,"DvtDiagramPoint");D.Eq.prototype.Init=function(a,b){this.x=a===D.o||(0,window.isNaN)(a)?0:a;this.y=b===D.o||(0,window.isNaN)(b)?0:b};
D.yp=function(a,b,c,d){this.Init(a,b,c,d)};(0,D.da)("DvtDiagramRectangle",D.yp);D.A.q(D.yp,D.A,"DvtDiagramRectangle");D.yp.prototype.Init=function(a,b,c,d){this.x=a===D.o||(0,window.isNaN)(a)?0:a;this.y=b===D.o||(0,window.isNaN)(b)?0:b;this.w=c===D.o||(0,window.isNaN)(c)?0:c;this.h=d===D.o||(0,window.isNaN)(d)?0:d};
D.up=function(a,b,c){this.Init(a,b,c)};(0,D.da)("DvtBaseDiagram",D.up);D.A.q(D.up,D.vp,"DvtBaseDiagram");D.z=D.up.prototype;D.z.Init=function(a,b,c){D.up.u.Init.call(this,a,b,c);this.j().Rc.ya().setAttributeNS(D.o,"text-rendering","geometricPrecision");this.a8;this.DK=this.so=D.o;this.lX;this.M4=D.k;this.Sl=new D.F(a);this.Ei=new D.F(a);this.bu=new D.F(a);this.gz=0.5;this.Xfa()};D.z.ON=function(){var a=this.ga;a.Cw(this.GD());a.Ju(this.oy());a.Aw(this.Ca());a.ja.k(this.Sl);a.ja.k(this.Ei);a.ja.k(this.bu)};
D.z.Aw=function(a){this.gz=a;this.ga&&this.ga.Aw(a)};D.z.Ca=(0,D.y)("gz");D.z.Ju=function(a){this.Av=a;this.ga&&this.ga.Ju(a)};D.z.oy=(0,D.y)("Av");D.z.Cw=function(a){this.Mt=a;this.ga&&this.ga.Cw(a)};D.z.GD=(0,D.y)("Mt");D.z.Xfa=function(){this.Ju(2);this.Cw(0)};D.z.Vj=function(){this.lK||(D.up.u.Vj.call(this),this.ON(),this.oq());this.lK=D.p};D.z.oq=(0,D.t)();D.z.V=(0,D.ba)(D.o);D.z.cc=(0,D.ba)(D.o);D.z.FI=function(){return[]};D.z.wB=function(){return[]};D.z.kf=function(){return this.wB().length};
D.up.prototype.getNodeCount=D.up.prototype.kf;D.up.prototype.Op=function(){return this.FI().length};D.up.prototype.getLinkCount=D.up.prototype.Op;D.wp=function(a,b){if(b&&a.BD())a.uC?(a.uC.ka(a.Ma/2),a.uC.Aa(a.Xa/2),D.Ye.Yb(a.uC,a.getWidth()-2*D.Ye.Y1,window.Infinity,a)):a.uC=a.pea(a.BD());else if(a.uC){var c=a.uC.getParent();c&&c.removeChild(a.uC);a.uC=D.o}};D.z=D.up.prototype;D.z.pea=function(a){var b=this.v();return D.Ye.cn(this,a,new D.C(0,0,this.getWidth(),this.getHeight()),this.Ia(),b._statusMessageStyle)};
D.z.BD=(0,D.y)("zn");D.z.kS=(0,D.y)("lX");D.z.yh=(0,D.y)("Qb");D.z.Ew=function(a){this.Qb="single"==a?new D.gl("s"):"multiple"==a?new D.gl("m"):D.o;this.Ia().Ku(this.Qb)};D.z.fm=function(){return this.Qb?this.Qb.$a():D.o};D.z.ir=function(){return this.Qb?D.k:D.p};D.z.Ia=(0,D.y)("rb");D.zp=function(a){var b=new D.xp,c=(0,D.G)(a.j());b.Hr=c;a=new D.yp(0,0,a.getWidth(),a.getHeight());b.A5=a;return b};
D.up.prototype.Nu=function(a,b){var c=new D.Ap;c.setId(a.getId?a.getId():a.getData().getId());c.tda(D.Bp.OZ(a.ig()));var d=D.Bp.OZ(a.Yf());c.hW=d;c.fs=d;c.Xn(a.lj(b));c.Xo(D.Bp.OZ(a.be()));c.$d(D.Bp.xqa(a.Id()));c.qb(D.k==a.Ga());if(a.mb()&&(c.qf(D.k),d=(0,D.Cp)(a.Zq()),c.mb()&&(c.Cg=d)))c.es&&(c.es=new D.yp(c.es.x,c.es.y,c.es.w-(d.left+d.right),c.es.h-(d.top+d.bottom))),c.fs&&(c.fs=new D.yp(c.fs.x,c.fs.y,c.fs.w-(d.left+d.right),c.fs.h-(d.top+d.bottom)));c.uT(a.getData().iS?a.getData().md:D.o);return c};
D.up.prototype.zE=function(a,b,c,d){var e=new D.Dp;e.setId(a.getId?a.getId():a.getData().getId());e.jN(b?b:a.getData().pd());e.bN(c?c:a.getData().rc());e.Xn(a.lj(d));e.Xo(D.Bp.OZ(a.be()));e.$d(D.Bp.xqa(a.Id()));b=a.yS();e.A$=b;b=a.fS();e.y6=b;e.nE(a.ew());e.qb(D.k==a.Ga());e.rE(D.k==a.Ay());return e};
D.up.prototype.vI=function(a,b,c){var d=a.Zq();if(d){var e=a.lv;e&&(e=this.V(e))&&e.kE((0,D.Ep)(d),b)}for(var e=d=window.Number.MAX_VALUE,f=0;f<a.kf();f++){var g=a.HD(f),h=this.V(g.getId()),j=g.jg();j&&(d=window.Math.min(d,j.x),e=window.Math.min(e,j.y));h=g.be();j=g.Id();h&&j&&(d=window.Math.min(d,j.x+h.x),e=window.Math.min(e,j.y+h.y))}for(f=0;f<a.Op();f++){var g=a.ED(f),l=this.cc(g.getId());if(j=g.Eb()){j=D.Fp.h2(j);for(h=0;h<j.length;h++)var m=j[h],d=window.Math.min(d,m.x),e=window.Math.min(e,m.y)}h=
g.be();j=g.Id();h&&j&&(d=window.Math.min(d,j.x+h.x),e=window.Math.min(e,j.y+h.y))}e=this.lea(-d,-e);d=e.x;e=e.y;for(f=0;f<a.kf();f++){g=a.HD(f);h=this.V(g.getId());(j=g.jg())&&h.Vw(j.x+d,j.y+e,b);var n=g.be(),m=g.Id();if(n&&m){var j=new D.H(m.x-j.x,m.y-j.y),m=g.Cj,q=D.Bp.wqa(g.Ci);b?((0,D.T)(b,"typeRectangle",h,h.be,h.Xo,n),h.Id()?(0,D.T)(b,"typePoint",h,h.Id,h.$d,j):h.$d(j),m!=D.o&&(0,D.T)(b,"typeNumber",h,h.cw,h.Bw,m),q&&(h.Ci?(0,D.T)(b,"typePoint",h,h.dw,h.Js,q):h.Js(q))):(h.Xo(n),h.$d(j),m!=D.o&&
h.Bw(m),q&&h.Js(q))}h.mb()&&(g=g.Zq())&&h.kE((0,D.Ep)(g),b)}if(!this.pz)for(f=0;f<a.Op();f++){g=a.ED(f);l=this.cc(g.getId());if(j=g.Eb()){0<j.length&&!(0,window.isNaN)(j[0])&&(j=D.Fp.ZT(j));for(var r=[],h=0;h<j.length;)(0,window.isNaN)(j[h])?(r.push(j[h]),h++):(r.push(j[h]+d),r.push(j[h+1]+e),h+=2);b&&l.Eb()?0<r.length&&(0,window.isNaN)(r[0])?(h=D.Gp.dra(l.Eb(),r),l.Dc(h.Mda),(0,D.T)(b,"typePath",l,l.Eb,l.Dc,h.Lda),(0,D.pl)(b,function(){l.Dc(r)})):(0,D.T)(b,"typePolyline",l,l.Eb,l.Dc,r):l.Dc(r)}h=
D.Bp.THa(g.be());j=g.Id();m=g.Cj;q=D.Bp.wqa(g.Ci);h&&j&&(g=new D.H(j.x+d,j.y+e),b?((0,D.T)(b,"typeRectangle",l,l.be,l.Xo,h),l.Id()?(0,D.T)(b,"typePoint",l,l.Id,l.$d,g):l.$d(g),m!=D.o&&(0,D.T)(b,"typeNumber",l,l.cw,l.Bw,m),q&&(l.Ci?(0,D.T)(b,"typePoint",l,l.dw,l.Js,q):l.Js(q))):(l.Xo(h),l.$d(g),m!=D.o&&l.Bw(m),q&&l.Js(q)))}if(b=a.PD())this.so=new D.C(b.x+d,b.y+e,b.w,b.h),this.DK=a.lv;c&&(this.a8=new D.H(d,e))};
D.Ip=function(a,b){var c;if(a.so&&(c=new D.C(a.so.x,a.so.y,a.so.e,a.so.g),a.DK))for(var d=a.V(a.DK);d;){var e=d.R(),f=d.Q();if(b){var g=(0,D.Hp)(b,d,d.R),h=(0,D.Hp)(b,d,d.Q);if(g||0==g)e=g;if(h||0==h)f=h}c.x+=e;c.y+=f;d=(d=d.getData().iS?d.getData().md:D.o)?a.V(d):D.o}return c};D.up.prototype.lea=function(a,b){return new D.H(a,b)};D.up.prototype.Kw=function(a,b){if(0==this.Mt){var c=this.ga,d=b?b:(0,D.Jp)(this,a,D.i,D.i),e=(0,D.Kp)(this,d);c.Cw(0.5*window.Math.min(e,c.oy()));return d}return D.o};
D.Kp=function(a,b){if(!b)return 0;var c=a.ga;return window.Math.min((a.Ma-2*c.Tq)/b.e,(a.Xa-2*c.Tq)/b.g)};
D.Jp=function(a,b,c,d){var e=D.o,f,g,h,j,l=a.ga.ja;c||(c=a.wB());for(var m=0;m<c.length;m++)if(f=c[m],(j=a.V(f))&&j.vb&&!j.je){var n=j,q=b;f=n.ig();g=new D.C(f.x,f.y,f.e,f.g);h=D.o;q&&(h=(0,D.Hp)(q,n,n.Id));h||(h=n.Id());var r=D.o,s=D.o;q&&(r=(0,D.Hp)(q,n,n.cw),s=(0,D.Hp)(q,n,n.dw));r==D.o&&(r=n.Cj);s||(s=n.Ci);n=n.be();h&&n&&(r!=D.o&&(n=(0,D.Lp)(n,r,s)),g.x=window.Math.min(f.x,n.x+h.x),g.y=window.Math.min(f.y,n.y+h.y),g.e=window.Math.max(f.x+f.e,n.x+h.x+n.e)-g.x,g.g=window.Math.max(f.y+f.g,n.y+h.y+
n.g)-g.y);f=g;h=g=D.o;b&&(g=(0,D.Hp)(b,j,j.R),h=(0,D.Hp)(b,j,j.Q));g==D.o&&(g=j.R());h==D.o&&(h=j.Q());f.x+=g;f.y+=h;if(g=j.getData().iS?j.getData().md:D.o)g=j.getParent(),j=(0,D.Mp)(new D.H(f.x,f.y),g,b),j=(0,D.Np)(j,l,b),g=(0,D.Mp)(new D.H(f.x+f.e,f.y+f.g),g,b),g=(0,D.Np)(g,l,b),f.x=j.x,f.y=j.y,f.e=g.x-j.x,f.g=g.y-j.y;e?(j=e.x,g=e.y,e.x=window.Math.min(e.x,f.x),e.y=window.Math.min(e.y,f.y),e.e=window.Math.max(j+e.e,f.x+f.e)-e.x,e.g=window.Math.max(g+e.g,f.y+f.g)-e.y):e=f}d||(d=a.FI());for(m=0;m<
d.length;m++)if(c=d[m],(c=a.cc(c))&&c.vb){j=c;g=b;f=new D.C(window.Number.MAX_VALUE,window.Number.MAX_VALUE,-window.Number.MAX_VALUE,-window.Number.MAX_VALUE);h=D.o;g&&(h=(0,D.Hp)(g,j,j.Eb));h||(h=j.Eb());if(h){h=D.Fp.h2(h);for(var u=D.i,u=n=s=r=D.i,q=0;q<h.length;q++)u=h[q],r=window.Math.max(f.x+f.e,u.x),s=window.Math.max(f.y+f.g,u.y),n=window.Math.min(f.x,u.x),u=window.Math.min(f.y,u.y),f.x=n,f.y=u,f.e=r-n,f.g=s-u}h=new D.C(f.x,f.y,f.e,f.g);r=D.o;g&&(r=(0,D.Hp)(g,j,j.Id));r==D.o&&(r=j.Id());n=s=
D.o;g&&(s=(0,D.Hp)(g,j,j.cw),n=(0,D.Hp)(g,j,j.dw));s==D.o&&(s=j.Cj);n||(n=j.Ci);j=j.be();r&&j&&(s!=D.o&&(j=(0,D.Lp)(j,s,n)),h.x=window.Math.min(f.x,j.x+r.x),h.y=window.Math.min(f.y,j.y+r.y),h.e=window.Math.max(f.x+f.e,j.x+r.x+j.e)-h.x,h.g=window.Math.max(f.y+f.g,j.y+r.y+j.g)-h.y);f=h;if(g=c.getData().iS?c.getData().md:D.o)c=c.getParent(),j=(0,D.Mp)(new D.H(f.x,f.y),c,b),j=(0,D.Np)(j,l,b),g=(0,D.Mp)(new D.H(f.x+f.e,f.y+f.g),c,b),g=(0,D.Np)(g,l,b),f.x=j.x,f.y=j.y,f.e=g.x-j.x,f.g=g.y-j.y;e?(j=e.x,g=
e.y,e.x=window.Math.min(e.x,f.x),e.y=window.Math.min(e.y,f.y),e.e=window.Math.max(j+e.e,f.x+f.e)-e.x,e.g=window.Math.max(g+e.g,f.y+f.g)-e.y):e=f}return e};
D.Lp=function(a,b,c){if(b==D.o&&!c)return a;var d=new D.H(a.x,a.y),e=new D.H(a.x+a.e,a.y),f=new D.H(a.x,a.y+a.g);a=new D.H(a.x+a.e,a.y+a.g);var g=new D.mj;b!=D.o&&(c&&g.translate(-c.x,-c.y),g.rotate(b),c&&g.translate(c.x,c.y));b=(0,D.Op)(g,d);e=(0,D.Op)(g,e);f=(0,D.Op)(g,f);d=(0,D.Op)(g,a);a=window.Math.min(window.Math.min(b.x,e.x),window.Math.min(f.x,d.x));g=window.Math.max(window.Math.max(b.x,e.x),window.Math.max(f.x,d.x));c=window.Math.min(window.Math.min(b.y,e.y),window.Math.min(f.y,d.y));b=window.Math.max(window.Math.max(b.y,
e.y),window.Math.max(f.y,d.y));return new D.C(a,c,g-a,b-c)};D.Np=function(a,b,c){for(var d=(0,D.Pp)(b),e=a,f=d.length-1;0<=f;f--){b=d[f];a=b.Da().ea();var g=D.o,h=D.o;c&&(g=(0,D.Hp)(c,b,b.R),h=(0,D.Hp)(c,b,b.Q));g!=D.o&&(a.Hc=g);h!=D.o&&(a.Bc=h);a.ty();e=(0,D.Op)(a,e)}return e};D.Mp=function(a,b,c){for(var d=(0,D.Pp)(b),e=a,f=0;f<d.length;f++){b=d[f];a=b.Da().ea();var g=D.o,h=D.o;c&&(g=(0,D.Hp)(c,b,b.R),h=(0,D.Hp)(c,b,b.Q));g!=D.o&&(a.Hc=g);h!=D.o&&(a.Bc=h);e=(0,D.Op)(a,e)}return e};
D.up.prototype.rN=function(a,b,c,d,e){var f=this.ga,g=f.Zc().e/2,h=f.Zc().g/2;c=g-(c+a)*e;d=h-(d+b)*e;a=g-a*e;b=h-b*e;this.so&&(h=(0,D.Ip)(this),-h.x*e<c?(g=c+h.x*e,c-=g,a+=g):-h.x*e>a&&(g=-h.x*e-a,c-=g,a+=g),-h.y*e<d?(e=d+h.y*e,d-=e,b+=e):-h.y*e>b&&(e=-h.y*e-b,d-=e,b+=e));f.Kt=c;f.Lt=d;f.It=a;f.Jt=b};D.Ep=function(a){var b={};b.top=a.top;b.right=a.right;b.bottom=a.bottom;b.left=a.left;return b};D.Cp=function(a){var b={};b.top=a.top;b.right=a.right;b.bottom=a.bottom;b.left=a.left;return b};
D.Qp=function(a,b){this.Init(a,b)};D.A.q(D.Qp,D.Rp,"DvtBaseDiagramKeyboardHandler");D.z=D.Qp.prototype;D.z.Init=function(a,b){D.Qp.u.Init.call(this,a,b);this.A=a};D.z.oa=(0,D.y)("A");D.z.By=function(a){return 9==a.keyCode?D.p:this.Bg(a)&&!a.ctrlKey};D.z.hr=function(a){return 32==a.keyCode&&a.ctrlKey};D.z.o_=function(a,b,c){b=b.keyCode;if(!c||1>c.length||!a)return D.o;var d=c[0];a=a.Je();a=a.x+a.e/2;for(var e=0;e<c.length;e++){var f=c[e],g=f.Je(),g=g.x+g.e/2;if(188==b&&g<=a||190==b&&g>=a){d=f;break}}return d};
D.z.C_=function(a,b,c,d){if(!d)return D.o;if(!b)return d[0];if(!a)return b;for(var e=0;e<d.length;e++){var f=d[e],g=f,h=a,j=f,l=this.DE(j.pd?j.pd():j.getData().pd()),j=this.DE(j.rc?j.rc():j.getData().rc()),l=h==l?j:l,h=(0,D.Sp)(h),l=(0,D.Sp)(l),h=window.Math.atan2(l.y-h.y,l.x-h.x),h=0>h?h+2*window.Math.PI:h;g.c4=h;l=g=f;h=this.DE(l.pd?l.pd():l.getData().pd());l=this.DE(l.rc?l.rc():l.getData().rc());h=(0,D.Sp)(h);l=(0,D.Sp)(l);g.XE=window.Math.sqrt(window.Math.pow(l.x-h.x,2)+window.Math.pow(l.y-h.y,
2));f.lO=a==this.DE(f.rc?f.rc():f.getData().rc())?1:0}d.sort(function(a,b){var c=a.c4,d=b.c4,e=-1;!(0,D.Tp)(c,d)&&c>d?e=1:(0,D.Tp)(c,d)&&(a.XE>b.XE?e=1:b.XE==a.XE&&a.lO>b.lO?e=1:b.XE==a.XE&&a.lO==b.lO&&(e=0));return e});for(a=0;a<d.length;a++)e=d[a],e.c4=D.i,e.XE=D.i,e.lO=D.i;c=40==c.keyCode?D.k:D.p;for(e=a=0;e<d.length;e++)if(d[e]===b){a=c?e==d.length-1?0:e+1:0==e?d.length-1:e-1;break}return d[a]};D.z.DE=(0,D.ba)(D.o);D.Sp=function(a){a=a.Je();return new D.H(a.x+a.e/2,a.y+a.g/2)};
D.Tp=function(a,b){var c=1E-7>=window.Math.abs(a-b);c||(c=1E-7>=window.Math.abs(2*window.Math.PI+window.Math.min(a,b)-window.Math.max(a,b)));return c};
D.Up=function(a,b,c){this.Init(a,b,c)};D.A.q(D.Up,D.F,"DvtBaseDiagramLink");D.z=D.Up.prototype;D.z.Init=function(a,b,c){D.Up.u.Init.call(this,a,D.o,b);this.A=c;this.jz;this.ji;this.Vx;this.Wa;this.UP;this.Cj;this.Ci;this.Re=D.p;this.RG=D.k;this.J;this.Eg;this.Lg};D.z.oa=(0,D.y)("A");D.z.xT=(0,D.t)();D.z.Mp=(0,D.ba)(D.o);D.z.FT=(0,D.t)();D.z.fLa=(0,D.y)("Lg");(0,D.da)("DvtBaseDiagramLink.prototype.getStartConnector",D.Up.prototype.fLa);D.Up.prototype.HJa=(0,D.y)("Eg");
(0,D.da)("DvtBaseDiagramLink.prototype.getEndConnector",D.Up.prototype.HJa);D.z=D.Up.prototype;D.z.Fw=(0,D.v)("J");D.z.Ab=(0,D.y)("J");D.z.Bw=function(a){this.Cj=a;var b=this.Wa,c=this.Id();this.be();b&&(a=(0,D.Vp)(c,a,this.Ci),b.Ja(a))};D.z.cw=(0,D.y)("Cj");D.z.Js=function(a){this.Ci=a;var b=this.Wa,c=this.Id();this.be();b&&(a=(0,D.Vp)(c,this.Cj,a),b.Ja(a))};D.z.dw=(0,D.y)("Ci");D.z.Id=(0,D.y)("UP");D.z.$d=function(a){if(a){this.UP=a;var b=this.Wa;this.be();b&&(a=(0,D.Vp)(a,this.Cj,this.Ci),b.Ja(a))}};
D.z.be=(0,D.ba)(D.o);D.z.Xo=(0,D.t)();D.z.yS=(0,D.ba)(0);D.z.fS=(0,D.ba)(0);D.z.Sf=(0,D.v)("RG");D.z.Ea=function(){return this.oa().ir()&&this.RG};D.z.Ga=(0,D.y)("Re");(0,D.da)("DvtBaseDiagramLink.prototype.isSelected",D.Up.prototype.Ga);D.z=D.Up.prototype;D.z.qb=(0,D.v)("Re");D.z.rE=(0,D.t)();D.z.Ay=(0,D.ba)(D.p);D.z.nE=(0,D.t)();D.z.ew=(0,D.ba)(1);(0,D.da)("DvtBaseDiagramLink.prototype.getLinkWidth",D.Up.prototype.ew);D.z=D.Up.prototype;D.z.fN=(0,D.t)();D.z.zH=(0,D.ba)("solid");D.z.eN=(0,D.t)();
D.z.NA=(0,D.ba)(D.o);D.z.Jp=(0,D.ba)(D.o);D.z.Xea=function(){return this.zH()};D.z.AE=function(){return this.ew()};D.z.Wea=function(){return this.NA()};D.Xp=function(a,b,c,d,e){if(c||e){var f;e||(f=a.J.jc().ea(),f.Qk(0),f.Nc=D.p);if(c=D.Wp.oea(a.j(),c,e,f,a))a.J.k(c),D.Wp.$I(c,0,e,b,d);return c}};
D.Up.prototype.Dc=function(a){this.jz=a;D.Fp.wU(a)?(this.Vx=a,this.ji=D.Fp.nea(a)):(this.ji=a,this.Vx=D.Fp.ZT(a));this.J&&this.J instanceof D.Mh&&(this.J.Wo(this.Vx),this.Eg?D.Wp.$I(this.Eg,this.Mp(),this.Jp(D.Wp.DI),this.ji,1):this.Eg=(0,D.Xp)(this,this.ji,this.Mp(),1,this.Jp(D.Wp.DI)),this.Lg?D.Wp.$I(this.Lg,this.dr(),this.Jp(D.Wp.WI),this.ji,0):this.Lg=(0,D.Xp)(this,this.ji,this.dr(),0,this.Jp(D.Wp.WI)));var b=a=D.o;this.ue&&this.ue.qD instanceof D.Mh&&this.ue.qD.Wo(this.Vx);this.ue&&(a=this.ue.du)&&
D.Wp.$I(a,this.dr(),this.Jp(D.Wp.WI),this.ji,0);this.ue&&(b=this.ue.cu)&&D.Wp.$I(b,this.Mp(),this.Jp(D.Wp.DI),this.ji,1);this.Vr&&this.Vr.qD instanceof D.Mh&&this.Vr.qD.Wo(this.Vx);this.zL&&this.zL.pj((0,D.Yp)(this));this.XJ&&this.XJ.pj((0,D.Zp)(this))};D.Up.prototype.Eb=(0,D.y)("jz");D.Yp=function(a){return!a.ji?D.o:new D.H(a.ji[0],a.ji[1])};D.Zp=function(a){if(!a.ji)return D.o;var b=a.ji.length;return new D.H(a.ji[b-2],a.ji[b-1])};
D.Vp=function(a,b,c){var d=new D.mj;b!=D.o&&(c&&d.translate(-c.x,-c.y),d.rotate(b),c&&d.translate(c.x,c.y));a&&d.translate(a.x,a.y);return d};D.Up.prototype.zN=function(a,b,c){!b&&0!=b&&(b=1);!c&&0!=c&&(c=0);c=this.AE()+c;a=new D.ig(a,b,c);return new D.$p(this.j(),this.Vx,a)};
D.bq=function(a,b,c,d){b=a.zN(b,c,d);a.Lg&&a.dr()&&(c=a.dr(),d=(0,D.aq)(b,a.ji,c,a.Jp(D.Wp.WI),a,0),b.du&&b.removeChild(b.du),b.du=d,b.T$=c,b.k(b.du));a.Eg&&a.Mp()&&(c=a.Mp(),a=(0,D.aq)(b,a.ji,c,a.Jp(D.Wp.DI),a,1),b.cu&&b.removeChild(b.cu),b.cu=a,b.S$=c,b.k(b.cu));return b};D.cq=function(a,b,c){a=a.Xea();a=D.Fp.mea(a);b.Qk(a,D.Fp.jfa(a,c),D.Fp.kfa(a,c))};
D.dq=function(a,b){if(a){var c=D.o;b.zb&&(c=b.zb());if(c){var d=a.jc()?a.jc().ea():D.o,e=a.Zb()?a.Zb().ea():D.o;d&&d.sr&&(d.sr(c),a.ba(d));e&&e.sr&&(e.sr(c),a.P(e))}}};D.z=D.Up.prototype;D.z.Vd=(0,D.ba)(D.o);D.z.Je=function(a){return this.I(a)};D.z.Nj=function(){return this.ya()};D.z.ce=(0,D.t)();D.z.sc=(0,D.t)();D.z.xc=(0,D.t)();D.z.Tc=(0,D.ba)(D.o);
D.eq=function(a,b,c){this.Init(a,b,c)};D.A.q(D.eq,D.F,"DvtBaseDiagramNode");D.z=D.eq.prototype;D.z.Init=function(a,b,c){D.eq.u.Init.call(this,a,D.o,b);this.A=c;this.Re=this.Ui=D.p;this.RG=D.k;this.Wa;this.UP;this.Cj;this.Ci;this.Gn;this.fl};D.z.oa=(0,D.y)("A");D.z.getData=(0,D.ba)(D.o);D.z.ig=function(){return this.Yf()};D.z.Yf=function(){return new D.C(0,0,this.getWidth(),this.getHeight())};D.z.lj=function(){return{}};
D.z.$d=function(a){if(a){this.UP=a;var b=this.Wa;this.be();b&&(a=(0,D.fq)(a,this.Cj,this.Ci),b.Ja(a))}};D.z.Id=(0,D.y)("UP");D.z.be=(0,D.ba)(D.o);D.z.Xo=(0,D.t)();D.z.Zq=(0,D.ba)(D.o);D.z.kE=(0,D.t)();D.z.mb=(0,D.y)("Ui");D.z.qf=(0,D.v)("Ui");D.z.Ga=(0,D.y)("Re");(0,D.da)("DvtBaseDiagramNode.prototype.isSelected",D.eq.prototype.Ga);D.z=D.eq.prototype;D.z.qb=(0,D.v)("Re");D.z.Sf=(0,D.v)("RG");D.z.Ea=function(){return this.oa().ir()&&this.RG};D.z.zT=(0,D.v)("je");D.z.BMa=(0,D.y)("je");
D.z.Bw=function(a){this.Cj=a;var b=this.Wa,c=this.Id();this.be();b&&(a=(0,D.fq)(c,a,this.Ci),b.Ja(a))};D.z.cw=(0,D.y)("Cj");D.z.Js=function(a){this.Ci=a;var b=this.Wa,c=this.Id();this.be();b&&(a=(0,D.fq)(c,this.Cj,a),b.Ja(a))};D.z.dw=(0,D.y)("Ci");D.fq=function(a,b,c){var d=new D.mj;b!=D.o&&(c&&d.translate(-c.x,-c.y),d.rotate(b),c&&d.translate(c.x,c.y));a&&d.translate(a.x,a.y);return d};D.z=D.eq.prototype;
D.z.Vw=function(a,b,c){c?((0,D.T)(c,"typeNumber",this,this.R,this.N,a),(0,D.T)(c,"typeNumber",this,this.Q,this.U,b)):(0,D.wk)(this,a,b)};D.z.Vd=(0,D.ba)(D.o);D.z.Je=function(a){var b=this.Yf(a);a=(0,D.bf)(this,new D.H(b.x,b.y));b=(0,D.bf)(this,new D.H(b.x+b.e,b.y+b.g));return new D.C(a.x,a.y,b.x-a.x,b.y-a.y)};D.z.Nj=function(){return this.ya()};D.z.ce=(0,D.t)();D.z.sc=(0,D.t)();D.z.xc=(0,D.t)();D.z.Tc=(0,D.ba)(D.o);D.gq=function(a,b){a.Gn||(a.Gn=[]);a.Gn.push(b)};
D.hq=function(a,b){a.fl||(a.fl=[]);a.fl.push(b)};
D.iq=function(a,b,c){this.Init(a,b,c)};(0,D.da)("DvtDiagram",D.iq);D.A.q(D.iq,D.up,"DvtDiagram");D.iq.prototype.Init=function(a,b,c){D.iq.u.Init.call(this,a,b,c);this.xf=new D.jq;this.rb=new D.kq(a,this.Yd,this);this.rb.Ge(this);(0,D.Jf)()||(0,D.Cj)(this.rb,new D.lq(this,this.rb));this.ob={};this.El=[];this.Pc={};this.Yu=[];this.Om=0};D.iq.newInstance=function(a,b,c){return new D.iq(a,b,c)};D.z=D.iq.prototype;
D.z.UI=function(){!this.Dq&&this.De&&("none"!=this.LJ&&(this.Fn={id:this.getId(),getId:(0,D.y)("id"),options:this.v(),getOptions:(0,D.y)("options"),panZoomMatrix:this.ga.ja.Da(),getPanZoomMatrix:(0,D.y)("panZoomMatrix"),nodes:this.ob?(0,D.mq)(this):[],links:this.Pc?(0,D.nq)(this):[],getNodes:(0,D.y)("nodes"),getLinks:(0,D.y)("links")},this.Fn.v=this.Fn.getOptions,this.Fn.CKa=this.Fn.getPanZoomMatrix,this.Fn.getId=this.Fn.getId,this.Fn.hsa=this.Fn.getNodes,this.Fn.Wra=this.Fn.getLinks),this.De=D.p,
this.SK=this.ga);this.Dq||this.x3()};D.z.x3=function(){this.Sl=new D.F(this.j());this.Ei=new D.F(this.j());this.bu=new D.F(this.j());this.ob={};this.El=[];this.Pc={};this.Yu=[];this.Dx=D.o};D.z.Iq=function(){this.Af&&(this.removeChild(this.Af),this.Af.X());this.Af=D.o;this.fb&&(this.fb=D.o,this.Ia().Ge(this))};
D.z.hf=function(a,b){var c=new D.vn(this.j(),D.o,a.Ca()),d=b.CKa(),e=this.ga.ja.Da();d.gd(e)||(this.ga.ja.Ja(d),(0,D.T)(c.O,"typeMatrix",this.ga.ja,this.ga.ja.Da,this.ga.ja.Ja,e));(0,D.Zm)(a,b.hsa(),this.ob?(0,D.mq)(this):[]);(0,D.Zm)(a,b.Wra(),this.Pc?(0,D.nq)(this):[]);a.add(c,1)};
D.z.oq=function(a){var b=D.p;if(!this.De&&!this.Dq){var c=this.v().nodes;if(c)for(var d=0;d<c.length;d++){var e=c[d],e=D.vl.Xd(e,this.v().styleDefaults.nodeDefaults),e=new D.oq(this.j(),this,e),f=e.getId();e.hca()?this.El.push(f):(e.W(this.Ei),this.El.push(f),this.ob[f]=e)}if(c=this.v().links)for(d=0;d<c.length;d++){var e=c[d],e=D.vl.Xd(e,this.v().styleDefaults.linkDefaults),g=new D.pq(this.j(),this,e),e=g.getId();g.hca()?this.Yu.push(e):(g.W(this.Sl),this.Yu.push(e),this.Pc[e]=g,f=this.V(g.pd()),
g=this.V(g.rc()),(0,D.gq)(f,e),(0,D.hq)(g,e))}b=0===window.Object.keys(this.ob).length;(0,D.am)(this.j(),[this]);this.Om++}if(b)this.Om=this.De?this.Om:this.Om-1,0===this.Om&&(0,D.qq)(this,a,b);else{this.contains(this.SK)||this.k(this.SK);var h=this;this.jr(a).then(function(){h.Om=h.De?h.Om:h.Om-1;0===h.Om&&(0,D.qq)(h,a,b)},function(){h.Om=h.De?h.Om:h.Om-1;0===h.Om&&(h.removeChild(h.SK),h.SK=D.o,h.De=D.k)})}};
D.qq=function(a,b,c){var d;if(!c){a.removeChild(a.SK);a.jA();a.kA();if(d=a.Wi==D.o)a.Wi=(0,D.Jp)(a,b,D.i,D.i);var e=a.ga;if(a.De){if(a.Dq){var f=a.Kw(b,a.Wi),f=g?(0,D.Ip)(a):f?f:a.Wi;e.IO=D.k;e.Zo(D.o,f);e.IO=a.CA}}else{a.Kw(b,a.Wi);if(!a.Dq){var g=a.so?D.k:D.p,f=g?(0,D.Ip)(a):a.Wi;g&&(e.Tq=0);e.Zo(D.o,f)}e.yi=a.Rt;e.ko=a.CA;e.IO=a.CA}}a.SK=D.o;a.De||(a.fb&&a.fb.stop(D.k),(0,D.fl)()&&a.kS()&&!a.Fn?a.fb=D.kl.my(a.j(),a.kS(),a,D.o,a.Ca()):"none"!=a.LJ&&a.Fn&&(a.Af=new D.F(a.j(),"Delete Container"),
a.k(a.Af),e=new D.rq(a.j(),a.Af,a.Fn,a),(0,D.Zm)(e,[a.Fn],[a]),a.fb=e.Xq()),a.fb?(a.Ia().Lc(),a.Ia().Oi(a),a.fb.pe(a.Iq,a),a.fb.play()):a.Iq());a.De=D.k;(0,D.wp)(a,c);a.Rt&&(c=a.Wi,c!=D.o&&(b=a.ga.ud(b),a.rN(c.x,c.y,c.e,c.g,b)));a.so=D.o;a.DK=D.o;d&&(a.Wi=D.o)};D.z=D.iq.prototype;
D.z.Bd=function(a){D.iq.u.Bd.call(this,a);(0,D.sq)(this,this.G);this.Rt="none"!=this.G.panning;this.CA="none"!=this.G.zooming;this.YO="hidden";this.LJ=this.G.animationOnDataChange;this.lX="auto"==this.G.animationOnDisplay?D.kl.Jw:D.o;this.Ew(this.G.selectionMode);this.zn=this.G.emptyText?this.G.emptyText:(0,D.uk)(this.G,"labelNoData","DvtUtilBundle","NO_DATA")};D.z.oy=function(){var a=this.v().maxZoom,a=(0,window.parseFloat)(a);return 0<a?a:1};
D.z.GD=function(){var a=this.v().minZoom;if(a){var b=(0,window.parseFloat)(a);0<b&&(a=window.Math.min(b,this.oy()));return a}return D.o};D.z.Ca=function(){return(0,D.np)(this.v().styleDefaults.animationDuration)/1E3};D.z.Yd=function(a){var b=a.$a();("categoryRollOver"==b||"categoryRollOut"==b)&&this.jA();a&&this.kb(a)};
D.z.jr=function(a){for(var b=this.v().layout,c=(0,D.zp)(this),d={},e=0;e<this.El.length;e++){var f=this.El[e];this.V(f)&&(d[f]=D.k,c.HR(this.Nu(this.V(f))))}for(var g in this.Pc)if(e=this.cc(g)){var f=e.getData().startNode,h=e.getData().endNode;d[f]&&d[h]&&(0,D.tq)(c,this.zE(e,f,h))}if(b&&"function"==typeof b){var j=this;(b=b(c))||(b={then:function(a){a()}});this.$0(0);b.then(function(){1===j.Om&&(j.$0(1),j.vI(c,a,D.k))},(0,D.t)());return b}this.KE("DvtDiagram: Layout function is not defined",1)};
D.z.$0=function(a){this.De||(this.Sl.D(a),this.Ei.D(a))};D.z.V=function(a){return this.ob[a]};D.z.cc=function(a){return this.Pc[a]};D.z.FI=(0,D.y)("Yu");D.nq=function(a){var b=[],c;for(c in a.Pc)b.push(a.Pc[c]);return b};D.iq.prototype.wB=(0,D.y)("El");D.mq=function(a){var b=[],c;for(c in a.ob)b.push(a.ob[c]);return b};D.z=D.iq.prototype;
D.z.Bh=function(a){D.iq.u.Bh.call(this,a);switch(a.Mj()){case "adjustPanConstraints":if(this.Rt){var b=a.Cv,c=this.Wi?this.Wi:(0,D.Jp)(this,a.O,D.i,D.i);this.rN(c.x,c.y,c.e,c.g,b)}break;case "zoomToFitCalcBounds":this.so||(c=this.Wi?this.Wi:(0,D.Jp)(this,a.O,D.i,D.i),a.gH=c);break;case "zoomed":if(this.v().zoomRenderer&&a.VC!==a.Cv)for(b in this.ob){var c=this.V(b),d=a;if(c.A.v().zoomRenderer){var e=c.$i(d.VC),d=c.$i(d.Cv);(0,D.uq)(c,c.A.v().zoomRenderer,d,e)}}}};D.z.Yta=(0,D.t)();
D.z.tM=function(a){var b=[],c;for(c in this.Pc){var d=this.cc(c),e=d.pd(),f=d.rc();(e==a||f==a)&&d.vb&&b.push(d)}return b};D.z.Uj=function(){return(0,D.N)("DvtUtilBundle","DIAGRAM")};D.z.kA=function(){if(this.G.selection&&this.ir()){var a=[],b;for(b in this.ob)a.push(this.V(b));for(var c in this.Pc)a.push(this.cc(c));(0,D.Ol)(this.yh(),this.G.selection,a)}};
D.z.jA=function(){this.Dx&&(this.DR(D.p,this.Dx),this.Dx=D.o);var a=this.G.highlightedCategories;if(a){var b="any"==this.G.highlightMatch;this.Dx={};var c=[],d;for(d in this.ob){var e=this.V(d),f=b?D.$f.UA(e.Tc(),a):D.$f.GS(e.Tc(),a);f&&(this.Dx[e.getId()]=e,c.push(e))}d=this.G.nodeHighlightMode;if("node"!=d){f="nodeAndIncomingLinks"==d||"nodeAndLinks"==d;d="nodeAndOutgoingLinks"==d||"nodeAndLinks"==d;for(var e=[],g=0;g<c.length;g++)for(var h=c[g],j=f&&h.fl?h.fl:[],j=d&&h.Gn?j.concat(h.Gn):j,h=0;h<
j.length;h++){var l=j[h];this.Dx[l]=this.cc(l);e.push(this.cc(l))}(0,D.vq)(this,e)}var c=[],m;for(m in this.Pc)if(d=this.cc(m),f=b?D.$f.UA(d.Tc(),a):D.$f.GS(d.Tc(),a))this.Dx[d.getId()]=d,c.push(d);"linkAndNodes"==this.G.linkHighlightMode&&(0,D.vq)(this,c);this.DR(D.k,this.Dx)}};D.vq=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.pd(),d=d.rc();a.Dx[e]=a.V(e);a.Dx[d]=a.V(d)}};
D.iq.prototype.DR=function(a,b){var c=a?this.G.styleDefaults._highlightAlpha:1;this.Sl.D(c);this.Ei.D(c);for(var d in b)a?this.bu.k(b[d]):b[d]instanceof D.pq?this.Sl.k(b[d]):b[d]instanceof D.oq&&this.Ei.k(b[d])};D.iq.prototype.Ke=function(a){this.G.highlightedCategories=D.vl.ea(a);this.jA()};D.iq.prototype.highlight=D.iq.prototype.Ke;D.iq.prototype.select=function(a){this.G.selection=D.vl.ea(a);this.kA()};D.iq.prototype.select=D.iq.prototype.select;
D.iq.prototype.Pf=function(){this.Uk||(this.Uk=new D.wq(this));return this.Uk};D.iq.prototype.getAutomation=D.iq.prototype.Pf;D.iq.prototype.KE=function(a,b){var c=this.v()._logger;if(c)switch(b){case 1:c.error&&c.error(a);break;case 2:c.warn&&c.warn(a);break;case 3:c.info&&c.info(a);break;default:c.log&&c.log(a)}};D.iq.prototype.Fs=function(a,b){var c=this.V(a);c&&c.Fs(b)};D.iq.prototype.processDefaultHoverEffect=D.iq.prototype.Fs;D.iq.prototype.iB=function(a,b){var c=this.V(a);c&&c.iB(b)};
D.iq.prototype.processDefaultSelectionEffect=D.iq.prototype.iB;D.iq.prototype.xw=function(a,b){var c=this.V(a);c&&c.xw(b)};D.iq.prototype.processDefaultFocusEffect=D.iq.prototype.xw;
D.yq=function(a,b){D.yq.u.constructor.call(this,a,b);this.i7=100;this.A=b};D.A.q(D.yq,D.zq,"DvtDiagramCategoryRolloverHandler");D.yq.prototype.o2=function(a){return D.A.Of(this,function(){this.tJ=D.k;this.A.Yd(a)})};D.yq.prototype.n2=function(a){return D.A.Of(this,function(){(0,D.Aq)(this);this.A.Yd(a)})};
D.jq=function(){this.Init({skyros:D.Bq,alta:D.Cq})};D.A.q(D.jq,D.Sj,"DvtDiagramDefaults");
D.Bq={skin:"alta",emptyText:D.o,selectionMode:"none",animationOnDataChange:"none",animationOnDisplay:"none",maxZoom:1,highlightMatch:"all",nodeHighlightMode:"node",linkHighlightMode:"link",panning:"none",touchResponse:"auto",zooming:"none",_statusMessageStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"),styleDefaults:{animationDuration:500,hoverBehaviorDelay:200,_highlightAlpha:0.1,nodeDefaults:{labelStyle:'font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;font-weight:bold;font-size:12px;color:#383A47',
hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",icon:{width:10,height:10,fillPattern:"none",shape:"circle"}},linkDefaults:{startConnectorType:"none",endConnectorType:"none",width:1,style:"solid",hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",labelStyle:'font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;font-weight:bold;font-size:12px;color:#383A47',_hitDetectionOffset:4}}};D.Cq={};
D.rq=function(a,b,c,d){this.Init(a,b,c,d)};D.A.q(D.rq,D.Ym,"DvtDiagramDataAnimationHandler");D.rq.prototype.Init=function(a,b,c,d){D.rq.u.Init.call(this,a,b);this.AEa=c;this.lQa=d};D.rq.prototype.Ca=function(){return(0,D.np)(this.AEa.v().styleDefaults.animationDuration)/1E3};
D.kq=function(a,b,c){this.Init(a,b,c);this.A=c};D.A.q(D.kq,D.Uj,"DvtDiagramEventManager");D.z=D.kq.prototype;D.z.tm=function(a,b,c){a=this.A.v();"dim"==a.hoverBehavior&&(b=b.Tc?b.Tc():[],a.highlightedCategories=c?b.slice():D.o,c=new D.Fm(c?"categoryRollOver":"categoryRollOut",a.highlightedCategories),b=(0,D.np)(a.styleDefaults.hoverBehaviorDelay),this.LB.Yd(c,(0,D.mq)(this.A),b,"any"==a.highlightMatch))};D.z.G1=function(a,b){return new D.yq(a,b)};
D.z.Xh=function(a){var b=D.k,c=a.keyCode,d=this.od(),e=d instanceof D.oq?d.nv:D.o;9!=c&&this.lx?(e.bM(a),a.preventDefault()):9==c&&e instanceof D.xj?!a.shiftKey&&d.xc()?(d.sc(),e.bM(a),a.preventDefault(),this.lx=D.k):(a.shiftKey&&this.lx?(this.YI(a,d),a.preventDefault()):(this.lx&&d.ce(),b=D.kq.u.Xh.call(this,a)),this.lx=D.p):b=D.kq.u.Xh.call(this,a);return b};D.z.Pu=function(){var a=this.A.v();return"none"!==a.panning||"none"!==a.zooming?"touchHold":"touchStart"===a.touchResponse?"touchStart":"auto"};
D.z.zr=function(a){return(0,D.Dq)(this,a,"panned")};D.z.Ww=function(a){return"panned"==a?D.p:D.kq.u.Ww.call(this,a)};
D.lq=function(a,b){this.Init(a,b)};D.A.q(D.lq,D.Qp,"DvtDiagramKeyboardHandler");D.lq.prototype.Bg=function(a){var b=D.p;switch(a.keyCode){case 188:case 190:b=a.altKey?D.k:D.p;break;default:b=D.lq.u.Bg.call(this,a)}return b};D.lq.prototype.Sh=function(a){if(9==a.keyCode){var b=this.ha.od();if(b)return(0,D.ki)(a),b;b=(0,D.mq)(this.oa());if(0<b.length)return(0,D.ki)(a),this.AD(b)}return D.lq.u.Sh.call(this,a)};D.lq.prototype.DE=function(a){return this.oa().V(a)};
D.Bp={};D.A.q(D.Bp,D.A,"DvtDiagramLayoutUtils");D.Bp.HLa=function(a){for(var b=D.Bp.jKa(a),c=window.Math.max(b.w,b.h),b=a.kf(),d=a.Op(),e=window.Math.floor(window.Math.sqrt(b)),f=0,f=(f=a.lj())&&f.padding?f.padding:0<d?c:0.25*c,c=c+f,d=-(window.Math.ceil(b/e)-1)*c/2,f=-(e-1)*c/2,g=0;g<b;g++)D.Bp.OHa(a.HD(g),d+c*window.Math.floor(g/e),f+c*(g%e))};
D.Bp.jKa=function(a){for(var b=a.kf(),c=0,d=0,e=0;e<b;e++){var f=a.HD(e),g=f.Hd(),c=window.Math.max(g.w,c),d=window.Math.max(g.h,d);if(f=f.be())c=window.Math.max(f.w,c),d=window.Math.max(g.h+f.h,d)}return new D.yp(0,0,c,d)};D.Bp.OHa=function(a,b,c){var d=a.Yf();a.pj(new D.Eq(b-d.x-0.5*d.w,c-d.y-0.5*d.h));D.Bp.BNa(a)};D.Bp.BNa=function(a){var b=a.Hd(),c=a.jg(),d=a.be();d&&a.$d(new D.Eq(b.x+c.x+0.5*(b.w-d.w),b.y+c.y+b.h))};D.Bp.OZ=function(a){return a===D.i||a==D.o?D.o:new D.yp(a.x,a.y,a.e,a.g)};
D.Bp.xqa=function(a){return a===D.i||a==D.o?D.o:new D.Eq(a.x,a.y)};D.Bp.THa=function(a){return a?new D.C(a.x,a.y,a.w,a.h):D.o};D.Bp.wqa=function(a){return a?new D.H(a.x,a.y):D.o};
D.pq=function(a,b,c){this.Init(a,b,c)};D.A.q(D.pq,D.Up,"DvtDiagramLink");D.z=D.pq.prototype;D.z.Init=function(a,b,c){D.pq.u.Init.call(this,a,c.id,b);this.wa=c;this.A.ir()&&this.setCursor("pointer")};D.z.getData=(0,D.y)("wa");D.z.getId=function(){return this.getData().id};D.z.pd=function(){return this.getData().startNode};D.z.rc=function(){return this.getData().endNode};D.z.be=function(){var a=D.o;this.Wa&&(a=this.Wa.I());return a};D.z.zH=function(){return this.getData().style};D.z.ew=function(){return this.getData().width};
D.z.NA=function(){return this.getData().color};D.z.dr=function(){return this.getData().startConnectorType};D.z.Mp=function(){return this.getData().endConnectorType};D.z.yS=function(){if(this.dr()){var a=this.Ab().jc().ea();a.Qk(0);return D.Wp.eU(D.o,this.dr(),D.o,a,this)}return 0};D.z.fS=function(){if(this.Mp()){var a=this.Ab().jc().ea();a.Qk(0);return D.Wp.eU(D.o,this.Mp(),D.o,a,this)}return 0};
D.z.W=function(a){var b=this.getData(),c=this.Vx;c||(c=["M",0,0,"L",0,0]);var d=b.id,e=b.color,f=b.width,g=b.style;this.Vr=this.zN("#000000",0,b._hitDetectionOffset);this.k(this.Vr);b=new D.ig(e,1,f);(0,D.Jf)()&&((0,D.Fq)()&&1==(0,D.Tn)())&&(b.Nc=D.k);g=D.Fp.mea(g);b.Qk(g,D.Fp.jfa(g),D.Fp.kfa(g));c=new D.Mh(this.j(),c,d);c.P(D.o);c.ba(b);this.Fw(c);this.k(c);b=this.A;c=this.getData();d=(0,D.G)(b.j())?"right":"left";c.label&&(g=c.labelStyle,b=new D.Kf(b.j(),c.label,0,0),b.Na(new D.I(g)),b.Gu(d),b.Oy("top"),
c=(0,D.Gq)((new D.I(c.labelStyle)).getWidth()),0<c&&D.Ye.Yb(b,c,window.Infinity,this)||this.k(b),this.Wa=b);a.k(this);this.kd("img");this.rn();this.A.Ia().La(this,this)};D.z.qb=function(a){D.pq.u.qb.call(this,a);a?this.Pv(this.Pl,D.k):this.Sz();this.rn()};D.z.Ea=function(){return this.oa().ir()&&"off"!=this.getData().selectable};
D.z.Pv=function(a,b){if(a){this.li||(this.li=this.Ab().jc());var c=this.Ab().jc().ea();c.sr&&c.sr(this.getData().hoverInnerColor);this.Ab().ba(c);(0,D.dq)(this.Lg,c);(0,D.dq)(this.Eg,c)}else this.li&&(this.Ab().ba(this.li),(0,D.dq)(this.Lg,this.li),(0,D.dq)(this.Eg,this.li),this.li=D.o);this.ue||(this.ue=(0,D.bq)(this,"#000000",1,0),this.Sa(this.ue,0));var c=b?this.getData().selectionColor:this.getData().hoverOuterColor,d=this.ue.jc().ea();d.sr(c);d.ra(2+this.AE());(0,D.cq)(this,d,D.k);this.ue.ba(d,
2)};D.z.Sz=function(){this.li&&(this.Ab().ba(this.li),(0,D.dq)(this.Lg,this.li),(0,D.dq)(this.Eg,this.li),this.li=D.o);this.ue&&(this.removeChild(this.ue),this.ue.X&&this.ue.X(),this.ue=D.o)};D.z.Xb=function(){this.Pl||(this.Pl=D.k,this.Pv(D.k,this.Ga()))};D.z.Mb=function(){this.Ga()?this.Pv(D.p,D.k):this.Sz();this.Pl=D.p};D.z.Ie=function(){var a=this.oa().v().tooltip;return a?(0,D.op)(this.oa().j().cd(),a,this.$v()):this.Kc()};D.z.Kc=function(){return this.getData().shortDesc};
D.z.$v=function(){return{id:this.getId(),type:"link",label:this.getData().label}};D.z.oc=function(){var a=[];this.Ea()&&a.push((0,D.N)("DvtUtilBundle",this.Ga()?"STATE_SELECTED":"STATE_UNSELECTED"));return(0,D.vk)(this.Kc(),a)};D.z.rn=function(){if(!(0,D.af)()){var a=this.oc();a&&this.Rb("label",a)}};
D.z.Vd=function(a){if(32==a.keyCode&&a.ctrlKey)return this;if(38==a.keyCode||40==a.keyCode){var b=this.yK;b||(b=this.oa().V((0,D.Hq)(this.oa(),this)));var c=this,d=this.oa().tM(b.getId()),e;(e=this.oa().Ia().$f)&&e.C_&&(c=e.C_(b,this,a,d));c.yK=b;return c}return 39==a.keyCode||37==a.keyCode?(a=this.WX(a.keyCode)?this.pd():this.rc(),this.oa().V(a)):a.type==D.rk?this:D.o};D.z.WX=function(a){var b=(0,D.Yp)(this),c=(0,D.Zp)(this),b=b.x<c.x?D.k:D.p;return 39==a&&b||37==a&&!b?D.p:D.k};
D.z.ce=function(){this.Sb=D.k;this.Xb()};D.z.sc=function(){this.Sb=D.p;this.Mb()};D.z.xc=(0,D.y)("Sb");D.z.Tc=function(){return this.getData().categories?this.getData().categories:[this.getId()]};D.z.hca=function(){var a=this.oa().v().hiddenCategories;return a&&D.$f.UA(a,this.Tc())||!this.oa().V(this.pd())||!this.oa().V(this.rc())?D.k:D.p};
D.z.hf=function(a,b){var c=b.Eb(),d=this.Eb(),e=new D.vn(this.j(),D.o,a.Ca());D.$f.gd(c,d)||(this.Dc(c),c="typePolyline",0<d.length&&(0,window.isNaN)(d[0])&&(c="typePath"),(0,D.T)(e.O,c,this,this.Eb,this.Dc,d));b.Wa&&this.Wa&&(d=b.Wa.Da(),c=this.Wa.Da(),d.gd(c)||(this.Wa.Ja(d),(0,D.T)(e.O,"typeMatrix",this.Wa,this.Wa.Da,this.Wa.Ja,c)));if(b.Ab()&&this.Ab()&&(d=b.Ab().jc(),c=this.Ab().jc(),d&&c&&d instanceof D.ig&&c instanceof D.ig&&(d.zb()!=c.zb()||d.getWidth()!=c.getWidth())))this.Ab().ba(d),(0,D.T)(e.O,
"typeStroke",this.Ab(),this.Ab().jc,this.Ab().ba,c);a.add(e,1)};D.z.vh=function(a){this.oa().Sl.k(this);var b=this,c=new D.xn(this.j(),this,a.Ca());(0,D.pl)(c,function(){b.getParent().removeChild(b);b.X()});a.add(c,0)};D.z.yg=function(a){this.D(0);a.add(new D.an(this.j(),this,a.Ca()),2)};D.z.lj=function(){return this.getData()};
D.Wp={};D.A.q(D.Wp,D.A,"DvtDiagramLinkConnectorUtils");D.Wp.DI="endConnector";D.Wp.WI="startConnector";D.Wp.fea="arrowOpen";D.Wp.VT="arrow";D.Wp.WT="arrowConcave";D.Wp.hea="rectangle";D.Wp.iea="rectangleRounded";D.Wp.gea="circle";
D.Wp.oea=function(a,b,c,d,e){if(c)return D.Wp.Vua(c,e);c=e.AE();switch(b){case D.Wp.VT:return D.Wp.Wua(a,c,e.NA());case D.Wp.WT:return D.Wp.Xua(a,c,e.NA());case D.Wp.fea:return D.Wp.Zua(a,c,d);case D.Wp.gea:return D.Wp.Uua(a,c,d);case D.Wp.hea:return D.Wp.tea(a,c,d);case D.Wp.iea:return D.Wp.cva(a,c,d)}return D.o};D.Wp.$I=function(a,b,c,d,e){b=D.Wp.Nua(a,c,d,e);a.Ja(b)};
D.Wp.Nua=function(a,b,c,d){var e=-1,f=0,g=0,h=0;c&&(f=c.length,1===d?(2<=f&&(g=c[f-2],h=c[f-1]),4<=f?(e=c[f-4],f=c[f-3]):(e=g-1E-4,f=h)):(2<=f&&(g=c[0],h=c[1]),4<=f?(e=c[2],f=c[3]):(e=g+1E-4,f=h)));c=g;d=h;e=D.Wp.Mua(e,f,g,h);g=a.rBa;g||(g=a.Da().ea(),a.rBa=g);h=new D.mj;b&&(b=D.Wp.Ika(a),f=a.Cc(),a=a.Jc(),h.translate(-0.5*b.e*f,-0.5*b.g*a));h.rotate(e);h.translate(c,d);h.concat(g);return h};D.Wp.Ika=function(a){var b=a.gBa;b||(b=a.I(),a.gBa=b);return b};
D.Wp.Mua=function(a,b,c,d){return window.Math.atan2(d-b,c-a)};D.Wp.Xua=function(a,b,c){b=6*D.Wp.XW(b);var d=0.8*b;a=new D.Yn(a,[-0.22*b,-0.5*d,0.78*b,0,-0.22*b,0.5*d,0,0]);a.va(c);return a};D.Wp.Wua=function(a,b,c){b=5*D.Wp.XW(b);var d=0.8*b;a=new D.Yn(a,[0,-0.5*d,b,0,0,0.5*d]);a.va(c);return a};D.Wp.XW=function(a){if(1>=a)return a;a=0.5*(a-1);return 1+a};
D.Wp.Zua=function(a,b,c){b*=3;var d=c.getWidth();a=new D.uo(a,[-b+d*window.Math.sqrt(2)/2,-b,d*window.Math.sqrt(2)/2,0,-b+d*window.Math.sqrt(2)/2,b]);a.ba(c);a.P(D.o);return a};D.Wp.qra=function(a){return 2*a};D.Wp.osa=function(a){return 3*a};D.Wp.Uua=function(a,b,c){b=D.Wp.qra(b);a=new D.Zn(a,b,0,b);a.ba(c);a.P(D.o);return a};D.Wp.tea=function(a,b,c){b=D.Wp.osa(b);a=new D.Re(a,0,-b/2,b,b);a.ba(c);a.P(D.o);return a};D.Wp.cva=function(a,b,c){a=D.Wp.tea(a,b,c);(0,D.Iq)(a,b);return a};
D.Wp.Vua=function(a,b){var c=(0,D.mi)(b.oa()),d=b.getData().Ml;c.Or=d;c.mB(b,b.SR);d=b.FH();c.Zt=d;return D.B.eI(c,a,b)};D.Wp.eU=function(a,b,c,d,e){if(c)return b=D.Wp.Ika(a),a=a.Cc(),0.5*b.e*a;a=e.AE();d=d.getWidth();switch(b){case D.Wp.fea:return d*window.Math.sqrt(2);case D.Wp.VT:return b=D.Wp.XW(a),5*b;case D.Wp.WT:return b=D.Wp.XW(a),0.78*6*b;case D.Wp.gea:return 2*D.Wp.qra(d)+d/2;case D.Wp.hea:case D.Wp.iea:return D.Wp.osa(d)+d/2;default:return 0}};
D.$p=function(a,b,c){D.$p.u.Init.call(this,a);this.Init(a,b,c)};D.A.q(D.$p,D.F,"DvtDiagramLinkUnderlay");D.$p.prototype.Init=function(a,b,c){b||(b=["M",0,0,"L",1,0]);this.yo=c;this.yo||(this.yo=new D.ig("#ffffff",1,1));this.qD=new D.Mh(a,b);this.qD.ba(c);this.qD.P(D.o);this.k(this.qD);this.S$=this.cu=this.T$=this.du=D.o};D.aq=function(a,b,c,d,e,f){a=D.Wp.oea(a.j(),c,d,a.yo,e);D.Wp.$I(a,0,d,b,f);return a};
D.$p.prototype.ba=function(a,b){this.yo=a;(0,D.Jf)()&&((0,D.Fq)()&&1==(0,D.Tn)())&&(a.Nc=D.k);this.qD.ba(a);if(this.du){var c=a.ea();c.Qk(0);c.Nc=D.p;if(this.T$==D.Wp.VT||this.T$==D.Wp.WT)c.ra(b),this.du.va(a.zb());this.du.ba(c)}if(this.cu){c=a.ea();c.Qk(0);c.Nc=D.p;if(this.S$==D.Wp.VT||this.S$==D.Wp.WT)c.ra(b),this.cu.va(a.zb());this.cu.ba(c)}};D.$p.prototype.jc=(0,D.y)("yo");
D.Fp={};D.A.q(D.Fp,D.A,"DvtDiagramLinkUtils");D.Fp.mea=function(a){var b=0;switch(a){case "dash":b=1;break;case "dot":b=2;break;case "dashDot":b=3}return b};D.Fp.jfa=function(a,b){if(0==a)return D.o;if(1==a)return b?"8,2":"6,4";if(2==a)return b?"4,1":"2,3";if(3==a)return b?"10,1,4,1":"8,3,2,3"};D.Fp.kfa=function(a,b){return b&&0!=a?1:D.o};D.Fp.ZT=function(a){var b=[];if(a)for(var c=0;c<a.length;c+=2)0==c?b.push("M"):b.push("L"),b.push(a[c]),b.push(a[c+1]);return b};
D.Fp.nea=function(a){var b=[];if(a)for(var c=0;c<a.length;c++)(0,window.isNaN)(a[c])||b.push(a[c]);return b};D.Fp.wU=function(a){return a&&0<a.length?(0,window.isNaN)(a[0]):D.p};D.Fp.h2=function(a){var b=[];a=D.Fp.wU(a)?D.Fp.nea(a):a;for(var c=0;c<a.length;c+=2)b.push(new D.H(a[c],a[c+1]));return b};
D.oq=function(a,b,c){this.Init(a,b,c)};D.A.q(D.oq,D.eq,"DvtDiagramNode");D.z=D.oq.prototype;D.z.Init=function(a,b,c){D.oq.u.Init.call(this,a,c.id,b);this.wa=c;this.A.ir()&&this.setCursor("pointer")};D.z.getData=(0,D.y)("wa");D.z.getId=function(){return this.wa.id};D.z.Yf=(0,D.y)("FJ");D.z.be=function(){var a=D.o;this.Wa&&(a=this.Gx?this.Gx:this.Wa.I());return a};
D.z.qb=function(a){var b=this.$i();D.oq.u.qb.call(this,a);this.A.v().selectionRenderer?(0,D.uq)(this,this.A.v().selectionRenderer,this.$i(),b):this.iB(a);this.rn()};D.z.iB=function(a){this.Lo()&&this.Lo().qb(a)};D.z.Ea=function(){return this.oa().ir()&&"off"!=this.getData().selectable};D.z.GN=(0,D.y)("J");
D.z.W=function(a){if(this.A.v().renderer)(0,D.uq)(this,this.A.v().renderer,this.$i(),D.o);else{var b=this.getData(),c=this.A,d=new D.I(b.backgroundStyle);if(!(0,D.Wf)(d)){var e=(0,D.Gq)(d.C("width")),f=(0,D.Gq)(d.C("height")),g=d.C("background-color"),h=d.C("border-color"),j=(0,D.Gq)(d.C("border-width")),d=(0,D.Gq)(d.C("border-radius")),c=new D.Re(c.j(),0,0,e,f);c.va(g);d&&(c.If(d),c.Rf(d));h&&c.ba(new D.ig(h,1,j));this.k(c);this.mI(c);this.Ua=c}g=this.A;if(h=b.icon){c=h.width;e=h.height;j=h.color;
g=h.source?new D.eh(g.j(),c/2,e/2,c,e,h.source,h.sourceSelected,h.sourceHover,h.sourceHoverSelected):new D.fh(g.j(),h.shape,"alta",c/2,e/2,c,e);"none"!=h.fillPattern?g.P(new D.gh(h.fillPattern,j,j)):g.va(j);h.borderColor&&g.ba(new D.ig(h.borderColor,h.borderWidth));this.k(g);this.J=g;if(this.Ua){var h=b.icon,j=this.Ua.getWidth(),c=this.Ua.getHeight(),e=h.width,f=h.height,d=0.5*(j-e),l=0.5*(c-f);if(h.positionX!==D.i)d=(0,window.parseFloat)(h.positionX),(0,D.G)(this.j())&&(d=j-d-e);else{var m=h.halign;
"start"==m?m=(0,D.G)(this.j())?"right":"left":"end"==m&&(m=(0,D.G)(this.j())?"left":"right");d="left"==m?0:"right"==m?j-e:d}h.positionY!==D.i?l=(0,window.parseFloat)(h.positionY):"top"==h.valign?l=0:"bottom"==h.valign&&(l=c-f);(0,D.wk)(this.J,d,l)}this.Ua||this.mI(g)}j=this.A;g=(0,D.G)(j.j())?"right":"left";b.label&&(h=b.labelStyle,j=new D.Kf(j.j(),b.label,0,0),j.Na(new D.I(h)),j.Gu(g),j.Oy("top"),g=(0,D.Gq)((new D.I(b.labelStyle)).getWidth()),0<g&&D.Ye.Yb(j,g,window.Infinity,this)||this.k(j),this.Wa=
j);(0,D.Jq)(this.Lo(),b)}a.k(this);a=D.o;this.nv?(b=this.I())&&(a=new D.C(b.x,b.y,b.e-b.x,b.g-b.y)):(a=this.Ua?this.Ua.BE(this):D.o)&&this.J?a=(0,D.Go)(a,this.J.BE(this)):!a&&this.J&&(a=this.J.BE(this));this.FJ=a;this.kd("img");this.rn();this.A.Ia().La(this,this)};
D.uq=function(a,b,c,d){var e=a.A.v()._contextHandler;if(e){var f=a.getData();c=e(a.ya(),a.nv,f,c,d);b=b(c);a.nv&&b!=a.nv&&(a.nv.namespaceURI===D.E.cO?(0,D.Kq)(a).removeChild(a.nv):a.removeChild(b),a.nv=D.o);b&&b.namespaceURI===D.E.cO?a.nv||(D.E.Gd((0,D.Kq)(a),b),a.nv=b):b instanceof D.xj?a.nv||(a.k(b),a.nv=b):b&&a.A.KE("DvtDiagram: could not add custom node content for the node "+a.getId()+b,1)}else a.A.KE("DvtDiagram: could not add custom node content - context handler is undefined",1)};
D.Jq=function(a,b){var c=b.hoverInnerColor,d=b.hoverOuterColor,e=b.selectionColor,f=new D.ig(c,1,4);f.Nc=D.k;d=new D.ig(d,1,8);d.Nc=D.k;var g=new D.ig(e,1,2);g.Nc=D.k;var h=new D.ig(e,1,4);h.Nc=D.k;c=new D.ig(c,1,4);c.Nc=D.k;e=new D.ig(e,1,8);e.Nc=D.k;a.Yp(f,d).$p(g,h).tr(c,e)};D.z=D.oq.prototype;D.z.mI=(0,D.v)("SG");D.z.Lo=function(){if(!this.SG&&this.FJ){var a=new D.Re(this.A.j(),this.FJ.x,this.FJ.y,this.FJ.e,this.FJ.g);(0,D.Ai)(a);this.mI(a);this.Sa(a,0);(0,D.Jq)(a,this.getData());this.SG=a}return this.SG};
D.z.Xb=function(){var a=this.$i();this.Pl=D.k;this.A.v().hoverRenderer?(0,D.uq)(this,this.A.v().hoverRenderer,this.$i(),a):this.Fs(D.k)};D.z.Mb=function(){var a=this.$i();this.Pl=D.p;this.A.v().hoverRenderer?(0,D.uq)(this,this.A.v().hoverRenderer,this.$i(),a):this.Fs(D.p)};D.z.Fs=function(a){this.Lo()&&(a?this.Lo().Xb():this.Lo().Mb())};D.z.Ie=function(){var a=this.oa().v().tooltip;return a?(0,D.op)(this.oa().j().cd(),a,this.$v()):this.Kc()};D.z.Kc=function(){return this.getData().shortDesc};
D.z.$v=function(){return{id:this.getId(),type:"node",label:this.getData().label}};D.z.oc=function(){var a=[];this.Ea()&&a.push((0,D.N)("DvtUtilBundle",this.Ga()?"STATE_SELECTED":"STATE_UNSELECTED"));return(0,D.vk)(this.Kc(),a)};D.z.rn=function(){if(!(0,D.af)()){var a=this.oc();a&&this.Rb("label",a)}};
D.z.Vd=function(a){var b=D.o;if(32==a.keyCode&&a.ctrlKey)b=this;else if(a.altKey){var c=this.oa().tM(this.getId()),d;(d=this.oa().Ia().$f)&&d.o_&&(b=d.o_(this,a,c));b?b.yK=this:b=this}else a.type==D.rk?b=this:(b=(0,D.mq)(this.oa()),b=(0,D.Pm)(this,a,b));return b};D.z.ce=function(){var a=this.$i();this.Sb=D.k;this.A.v().focusRenderer?(0,D.uq)(this,this.A.v().focusRenderer,this.$i(),a):this.xw(D.k)};
D.z.sc=function(){this.xc()&&(this.$i(),this.Sb=D.p,this.A.v().focusRenderer?(0,D.uq)(this,this.A.v().focusRenderer,this.getData(),this.$i()):this.xw(D.p))};D.z.xw=function(a){this.Fs(a)};D.z.xc=(0,D.y)("Sb");D.z.Tc=function(){return this.getData().categories?this.getData().categories:[this.getId()]};D.z.hca=function(){var a=this.oa().v().hiddenCategories;return a&&D.$f.UA(a,this.Tc())?D.k:D.p};
D.z.hf=function(a,b){var c=new D.vn(this.j(),D.o,a.Ca()),d=b.R(),e=b.Q(),f=this.R(),g=this.Q();d!=f&&(this.N(d),(0,D.T)(c.O,"typeNumber",this,this.R,this.N,f));e!=g&&(this.U(e),(0,D.T)(c.O,"typeNumber",this,this.Q,this.U,g));b.J&&this.J&&((0,D.T)(c.O,"typeRectangle",this.J,this.J.iu,this.J.lB,this.J.iu()),this.J.lB(b.J.iu()));b.Wa&&this.Wa&&(d=b.Wa.Da(),e=this.Wa.Da(),d.gd(e)||(this.Wa.Ja(d),(0,D.T)(c.O,"typeMatrix",this.Wa,this.Wa.Da,this.Wa.Ja,e)));(0,D.Lq)(c,b.Ua,this.Ua);(0,D.Lq)(c,b.J,this.J);
a.add(c,1)};D.Lq=function(a,b,c){b&&c&&((0,D.T)(a.O,"typeFill",c,c.Zb,c.P,c.Zb()),c.P(b.Zb()))};D.oq.prototype.vh=function(a){this.oa().Ei.k(this);var b=this,c=new D.xn(this.j(),this,a.Ca());(0,D.pl)(c,function(){b.getParent().removeChild(b);b.X()});a.add(c,0)};D.oq.prototype.yg=function(a){this.D(0);a.add(new D.an(this.j(),this,a.Ca()),2)};D.oq.prototype.lj=function(){return this.getData()};D.oq.prototype.$i=function(a){return{hovered:this.Pl,selected:this.Ga(),focused:this.Sb,zoom:a?a:this.oa().ga.ud()}};
D.wq=function(a){this.Init(a)};(0,D.da)("DvtDiagramAutomation",D.wq);D.A.q(D.wq,D.Ij,"DvtDiagramAutomation");D.wq.prototype.Init=(0,D.v)("A");D.wq.prototype.Dl=function(a){return(a=(0,D.Jj)(this.A.Ia(),a))&&a instanceof D.oq?"node["+this.A.wB().indexOf(a.getId())+"]":a&&a instanceof D.pq?"link["+this.A.FI().indexOf(a.getId())+"]":D.o};
D.wq.prototype.Qf=function(a){if("tooltip"==a)return(0,D.hm)(this.A);var b=this.IG(a);a=b.component;var b=b.index,c=D.o;"node"==a?c=this.fi(b):"link"==a&&(c=(0,D.xq)(this,b));return c?c.ya():D.o};D.wq.prototype.getDomElementForSubId=D.wq.prototype.Qf;D.wq.prototype.IG=function(a){var b=a,c=-1,d=a.substring(0,a.indexOf("["));d&&(b="node"==d||"link"==d?d:D.o,c=(0,window.parseInt)(a.substring(a.indexOf("[")+1,a.indexOf("]"))));return{component:b,index:c}};D.wq.prototype.kf=function(){return this.A.kf()};
D.wq.prototype.getNodeCount=D.wq.prototype.kf;D.wq.prototype.Op=function(){return this.A.Op()};D.wq.prototype.getLinkCount=D.wq.prototype.Op;D.wq.prototype.$b=function(a){if(a=this.fi(a)){var b={};b.id=a.getId();b.selected=a.Ga();b.tooltip=a.Kc();b.label=a.getData().label;b.background=a.getData().backgroundStyle;b.icon=this.DP(a.GN());return b}return D.o};D.wq.prototype.getNode=D.wq.prototype.$b;
D.wq.prototype.nM=function(a){if(a=(0,D.xq)(this,a)){var b={};b.id=a.getId();b.selected=a.Ga();b.tooltip=a.Kc();b.label=a.getData().label;b.color=a.NA();b.width=a.ew();b.style=a.zH();b.startNode=a.pd();b.endNode=a.rc();b.startConnectorType=a.dr();b.endConnectorType=a.Mp();return b}return D.o};D.wq.prototype.getLink=D.wq.prototype.nM;D.wq.prototype.DP=function(a){if(a){var b={};b.shape=a instanceof D.fh?a.$a():"none";a.Zb()&&(b.color=a.Zb().zb());return b}return D.o};
D.wq.prototype.fi=function(a){var b=this.A.wB();return 0<=a&&a<b.length?this.A.V(b[a]):D.o};D.xq=function(a,b){var c=a.A.FI();return 0<=b&&b<c.length?a.A.cc(c[b]):D.o};

  return D;
});