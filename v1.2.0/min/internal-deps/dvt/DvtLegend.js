/**
 * Copyright (c) 2014, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(['./DvtToolkit'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.
  
  // Map the D namespace to dvt, which is used to provide access across partitions.
  var D = dvt;
  
D.$N=(0,D.t)();(0,D.da)("DvtLegend",D.$N);D.A.q(D.$N,D.xj,"DvtLegend");D.Hn=function(a,b,c){var d=new D.$N;d.Init(a,b,c);return d};D.$N.newInstance=D.Hn;D.$N.getDefaults=function(a){return(0,D.yj)(new D.aO,a)};D.$N.prototype.Init=function(a,b,c){D.$N.u.Init.call(this,a,b,c);this.setId("legend1000"+window.Math.floor(1E9*window.Math.random()));this.xf=new D.aO;this.ha=new D.bO(this);this.ha.Ge(this);this.Kq=[];this.cs=[];this.Va=D.o;this.O$=[]};
D.$N.prototype.Bd=function(a){a?(this.G=this.xf.fk(a),(0,D.cO)(this,this.G.sections)):this.G||(this.G=(0,D.Ej)(this))};D.$N.prototype.Pp=function(a,b,c){this.Bd(a);this.v().isLayout=D.k;a=D.dO.W(this,new D.C(0,0,b,c));this.v().isLayout=D.p;return new D.Eg(a.e,a.g)};D.$N.prototype.getPreferredSize=D.$N.prototype.Pp;
D.$N.prototype.W=function(a,b,c){this.Bd(a);!(0,window.isNaN)(b)&&!(0,window.isNaN)(c)&&(this.Ma=b,this.Xa=c);this.v().isLayout=D.p;this.Rj();this.Kq=[];this.cs=[];this.Va=D.o;this.O$=[];(0,D.Jf)()||(0,D.Cj)(this.ha,new D.eO(this.ha,this));this.fo();this.D5=D.dO.W(this,new D.C(0,0,this.Ma,this.Xa));(a=this.v().highlightedCategories)&&0<a.length&&this.Ke(a);return this.D5};D.$N.prototype.render=D.$N.prototype.W;
D.$N.prototype.Ke=function(a){this.v().highlightedCategories=a&&0<a.length?a.slice():D.o;(0,D.wl)(a,this.Kq,D.k)};D.$N.prototype.highlight=D.$N.prototype.Ke;D.$N.prototype.Yd=function(a,b){var c=a.$a();if(("categoryRollOver"==c||"categoryRollOut"==c)&&"dim"==this.v().hoverBehavior){var d=this.Kq;this!=b&&this.Ke(a.categories);for(var e=0;e<d.length;e++)if(d[e].getId()==a.al){this.vqa.scrollIntoView(d[e].hd()[0]);break}}(this==b||"showPopup"==c||"hidePopup"==c)&&this.kb(a)};D.$N.prototype.Ia=(0,D.y)("ha");
D.$N.prototype.g4=function(a){if(a.hd()[0]instanceof D.Ne)this.cs.push(a);else{var b=this.v().hideAndShowBehavior;(a.Ie()!=D.o||a.He()!=D.o||a.eh()||"none"!=b&&"off"!=b)&&this.cs.push(a);this.Kq.push(a)}};D.$N.prototype.X=function(){this.ha&&(this.ha.Oi(this),this.ha.X(),this.ha=D.o);D.$N.u.X.call(this)};D.$N.prototype.destroy=D.$N.prototype.X;D.$N.prototype.h4=(0,D.v)("Va");D.$N.prototype.Pf=function(){return new D.fO(this)};D.$N.prototype.getAutomation=D.$N.prototype.Pf;D.z=D.$N.prototype;
D.z.CD=function(){return this.ha!=D.o?this.ha.od():D.o};D.z.g1=function(a,b){if(this.ha!=D.o){for(var c=this.cs,d=0;d<c.length;d++)if(c[d].getId()==a.getId()){(0,D.Gj)(this.ha,c[d]);b&&c[d].ce();break}if(c=this.CD())d=c.hd()[0],d.Rb("label",c.oc()),(0,D.Cg)(this.j(),d)}};D.z.I=function(a){var b=new D.C(0,0,this.Ma,this.Xa);return!a||a===this?b:(0,D.Jg)(this,b,a)};D.z.rs=function(a){return!a||a===this?this.D5:(0,D.Jg)(this,this.D5,a)};D.z.Uj=function(){return(0,D.N)("DvtUtilBundle","LEGEND")};
D.cO=function(a,b){if(b&&!(0>=b.length))for(var c=a.v().hiddenCategories,d=0;d<b.length;d++){var e=b[d];e.sections&&(c=(0,D.cO)(a,e.sections));if((e=e.items)&&!(0>=e.length))for(var f=0;f<e.length;f++){var g=e[f],h=D.dO.w_(g);"hidden"==g.categoryVisibility&&0>D.$f.Ta(c,h)&&c.push(h);g.categoryVisibility=D.o}}};
D.$N.prototype.fo=function(){if((0,D.WD)(this)){var a=this.v(),b=a.hideAndShowBehavior;if("off"!=b&&"none"!=b||"dim"==a.hoverBehavior)this.j().kd("application"),(0,D.XD)(this.j(),(0,D.N)("DvtUtilBundle","COLON_SEP_LIST",[(0,D.N)("DvtUtilBundle","DATA_VISUALIZATION"),D.kg.hB(this.Uj())]))}};D.$N.prototype.XA=function(){return 0<this.cs.length};
D.Rl={};(0,D.da)("DvtLegendConstants",D.Rl);D.A.q(D.Rl,D.A,"DvtLegendConstants");D.Rl.xI="background";D.Rl.BACKGROUND=D.Rl.xI;D.Rl.NI="legendItem";D.Rl.LEGEND_ITEM=D.Rl.NI;D.Rl.Er="title";D.Rl.TITLE=D.Rl.Er;
D.fO=function(a){this.Fb=a;this.le=this.Fb.v()};(0,D.da)("DvtLegendAutomation",D.fO);D.A.q(D.fO,D.Ij,"DvtLegendAutomation");D.fO.prototype.Dl=function(a){if((a=(0,D.Jj)(this.Fb.Ia(),a))&&a instanceof D.gO)if(a=a.getData(),a=(0,D.hO)(this,a,this.le))return"section"+a;return D.o};
D.hO=function(a,b,c){if(c.sections&&0<c.sections.length){for(var d=0;d<c.sections.length;d++){if(c.sections[d]==b)return"["+d+"]";var e=(0,D.hO)(a,b,c.sections[d]);if(e)return"["+d+"]"+e}return D.o}if(c.items&&0<c.items.length){for(a=0;a<c.items.length;a++)if(c.items[a]==b)return":item["+a+"]";return D.o}};
D.jm=function(a,b,c){if(c.sections&&0<c.sections.length){for(var d=0;d<c.sections.length;d++){var e=(0,D.jm)(a,b,c.sections[d]);if(e)return"["+d+"]"+e}return D.o}if(c.items&&0<c.items.length){for(a=0;a<c.items.length;a++)if(c.items[a].text==b.name)return":item["+a+"]";return D.o}};
D.em=function(a,b,c){var d=c.indexOf("["),e=c.indexOf("]");if(0<=d&&0<=e){var d=c.substring(d+1,e),f=c.indexOf(":");c=c.substring(e+1);e=c.indexOf("]");return 0<=c.indexOf("[")&&0<=e?(0,D.em)(a,b.sections[d],c):0==f?b.items[d]:b.sections[d]}};D.fO.prototype.Qf=function(a){if("tooltip"==a)return(0,D.hm)(this.Fb);a=(0,D.em)(this,this.le,a);for(var b=this.Fb.Kq,c=0;c<b.length;c++){var d=b[c].getData();if(a==d)return b[c].hd()[0].ya()}return D.o};D.fO.prototype.getDomElementForSubId=D.fO.prototype.Qf;
D.fO.prototype.kw=function(){return this.le.title};D.fO.prototype.getTitle=D.fO.prototype.kw;D.fO.prototype.getItem=function(a){for(var b,c=a.shift(),d=this.le;c!=D.i;)0<a.length?d=d.sections[c]:b=d.items[c],c=a.shift();return b?{text:b.text?b.text:D.o}:D.o};D.fO.prototype.getItem=D.fO.prototype.getItem;
D.fO.prototype.QKa=function(a){for(var b,c=a.shift(),d=this.le;c!=D.i;)0<a.length?d=d.sections[c]:b=d.sections[c],c=a.shift();return{title:b.title?b.title:D.o,items:b.items?(0,D.iO)(b.items):D.o,sections:b.sections?(0,D.jO)(this,b.sections):D.o}};D.fO.prototype.getSection=D.fO.prototype.QKa;D.iO=function(a){for(var b=[],c=0;c<a.length;c++)b.push({text:a[c].text});return b};
D.jO=function(a,b){for(var c=[],d=0;d<b.length;d++)c.push({title:b[d].title?b[d].title:D.o,items:b[d].items?(0,D.iO)(b[d].items):D.o,sections:b[d].sections?(0,D.jO)(a,b[d].sections):D.o});return c};
D.aO=function(){this.Init({skyros:D.kO,alta:D.lO,next:D.mO})};D.A.q(D.aO,D.Sj,"DvtLegendDefaults");D.mO={skin:"next",titleStyle:new D.I("color: #737373;"),_sectionTitleStyle:new D.I("color: #737373;"),layout:{titleGapWidth:17,titleGapHeight:9,symbolGapWidth:7,symbolGapHeight:4,rowGap:4,columnGap:10,sectionGapHeight:16,sectionGapWidth:24}};
D.lO={skin:"alta",textStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"),titleStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 11px; color: #333333;"),_sectionTitleStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 11px; color: #333333;")};
D.kO={skin:"skyros",orientation:"vertical",position:D.o,backgroundColor:D.o,borderColor:D.o,textStyle:new D.I("font-family: tahoma, sans-serif; font-size: 11px; color: #333333;"),titleStyle:new D.I("font-family: tahoma, sans-serif; font-size: 12px; color: #003d5b;"),titleHalign:"start",hiddenCategories:[],hideAndShowBehavior:"off",hoverBehavior:"none",hoverBehaviorDelay:200,scrolling:"asNeeded",halign:"start",valign:"top",drilling:"off",_color:"#a6acb1",_markerShape:"square",_lineWidth:3,layout:{outerGapWidth:3,
outerGapHeight:3,titleGapWidth:8,titleGapHeight:3,symbolGapWidth:5,symbolGapHeight:4,rowGap:0,columnGap:8,sectionGapHeight:6,sectionGapWidth:15},isLayout:D.p};D.nO=function(a,b){var c=window.Math.min(D.Ye.jw(a.j(),a.v().textStyle)/14,1);return window.Math.ceil(b*c)};
D.bO=function(a){this.Init(a.j(),a.Yd,a);this.Fb=a};D.A.q(D.bO,D.Uj,"DvtLegendEventManager");D.z=D.bO.prototype;D.z.Qw=function(a,b){var c=D.o;b instanceof D.Kj&&b.Nm!=D.o?c=b.Nm:b instanceof D.gO&&(c=b.getId(),c={type:D.Rl.NI,id:c});this.jh(new D.Wj(a,c),this.Fb)};D.z.Wh=function(a){D.bO.u.Wh.call(this,a);var b=(0,D.Jj)(this,a.target);if(b){var c=(0,D.oO)(this,b),b=this.Cu(b);(c||b)&&a.stopPropagation()}};D.z.Xy=function(a){D.bO.u.Xy.call(this,a);(a=(0,D.Jj)(this,a.target))&&this.Yw(a)};
D.z.hn=function(a){D.bO.u.hn.call(this,a);(0,D.Jj)(this,a.target)};D.z.zr=function(a){var b=(0,D.Jj)(this,a.target);if(b){a=a.Hda;var c=(0,D.oO)(this,b),b=this.Cu(b);(c||b)&&a&&a.preventDefault()}};
D.oO=function(a,b){var c=a.Fb.v().hideAndShowBehavior;if("none"==c||"off"==c)return D.p;var d=b.Tc?b.Tc():D.o;if(!d||0>=d.length)return D.p;for(var e=b.Tc()[0],c=a.Fb.v().hiddenCategories||[],c=c.slice(),f=b.hd(),g=0;g<f.length;g++){var h=f[g];h instanceof D.fh?h.lI(b.zb()):h instanceof D.Re&&(0,D.pO)(b)}d=d[0];D.dO.i0(e,a.Fb)?(c.splice(c.indexOf(e),1),e=new D.Cl(D.Cl.az,d)):(c.push(e),e=new D.Cl(D.Cl.Xw,d));e.hiddenCategories=c;a.Fb.v().hiddenCategories=c;a.jh(e,a.Fb);return D.k};
D.bO.prototype.Cu=function(a){return a&&a.He&&a.He()?(this.jh(new D.Xj("action",a.He(),a.getId()),this.Fb),D.k):a instanceof D.gO&&a.eh()?(a=a.getId(),this.jh(new D.Zj(a,a,D.o),this.Fb),D.k):D.p};D.bO.prototype.tm=function(a,b,c){a=this.Fb.v();"none"==a.hoverBehavior||b.hd&&b.hd()[0]instanceof D.Ne||(b=b.Tc?b.Tc():[],a.highlightedCategories=c?b.slice():D.o,c=new D.Fm(c?"categoryRollOver":"categoryRollOut",a.highlightedCategories),a=(0,D.np)(a.hoverBehaviorDelay),this.LB.Yd(c,this.Fb.Kq,a,D.k))};
D.bO.prototype.Hca=function(a,b){for(var c=b.getId(),d=this.Fb.v(),e=0;e<c.length;e++)d=d.sections[c[e]];d.expanded="off"==d.expanded?"on":"off";a.type==D.rk&&(c=(0,D.Jj)(this,(0,D.ym)(this,a)),(0,D.Gj)(this,c.Vd(a)));d=(c=this.Fb.CD())?c.xc():D.p;this.Fb.W();c&&this.Fb.g1(c,d);this.Lc();c=this.Fb.rs();this.jh(new D.nC(c.e,c.g,c.x,c.y),this.Fb)};D.bO.prototype.Pu=function(){return this.Fb.v()._isScrollingLegend?"touchHold":"touchStart"};
D.eO=function(a,b){this.Init(a,b)};D.A.q(D.eO,D.qk,"DvtLegendKeyboardHandler");D.eO.prototype.Init=function(a,b){D.eO.u.Init.call(this,a);this.Fb=b};
D.eO.prototype.Sh=function(a){var b=a.keyCode,c=this.ha.od(),d=c&&c.hd()[0]instanceof D.Ne,e=D.o;c==D.o&&9==b?(b=this.Fb.cs,0<b.length&&((0,D.ki)(a),e=this.AD(b))):c&&(9==b?((0,D.ki)(a),e=c):13==b||32==b?(13==b&&this.ha.Cu(c),d?this.ha.Hca(a,c.hd()[0]):(0,D.oO)(this.ha,c),(0,D.ki)(a)):d&&(37==b||39==b)?(this.ha.Hca(a,c.hd()[0]),(0,D.ki)(a)):e=D.eO.u.Sh.call(this,a));e&&this.Fb.vqa.scrollIntoView(e.hd()[0]);return e};
D.gO=function(a,b,c,d,e,f){this.Init(a,b,c,d,e,f)};D.A.q(D.gO,D.A,"DvtLegendObjPeer");D.gO.prototype.Init=function(a,b,c,d,e,f){this.Fb=a;this.te=b;this.hl=c;this.ib=(this.al=D.dO.w_(this.hl))?this.al:c.title;this.sn=c.action;this.Mr=f;this.NGa=c._spb;this.oi=d;this.Z5=e;this.Sb=D.p;if(this.sn||this.Mr)for(a=0;a<this.te.length;a++)this.te[a].setCursor("pointer")};D.qO=function(a,b,c,d,e,f){if(!a||!c)return D.o;c=new D.gO(b,a,c,d,e,f);b.g4(c);for(d=0;d<a.length;d++)b.Ia().La(a[d],c);return c};
D.z=D.gO.prototype;D.z.getData=(0,D.y)("hl");D.z.zb=function(){return this.hl.color};D.z.getId=(0,D.y)("ib");D.z.hd=(0,D.y)("te");D.z.Tc=function(){return this.al!=D.o?[this.al]:D.o};D.z.He=(0,D.y)("sn");D.z.eh=(0,D.y)("Mr");D.z.Jd=(0,D.y)("NGa");
D.z.oc=function(){var a=[],b=this.Fb.v(),c=this.Fb.v().hideAndShowBehavior,d=D.dO.i0(this.al,this.Fb),e=this.getData();if(this.te[0]instanceof D.Ne)return a.push((0,D.N)("DvtUtilBundle","off"==e.expanded?"STATE_COLLAPSED":"STATE_EXPANDED")),(0,D.vk)(e.title,a);"off"!=c&&"none"!=c&&a.push((0,D.N)("DvtUtilBundle",d?"STATE_HIDDEN":"STATE_VISIBLE"));this.eh()&&a.push((0,D.uk)(b,"stateDrillable","DvtUtilBundle","STATE_DRILLABLE"));return e.shortDesc!=D.o?(0,D.vk)(e.shortDesc,a):0<a.length?(0,D.vk)(e.text,
a):D.o};D.pO=function(a){!(0,D.af)()&&a.te[0]&&a.te[0].Rb("label",a.oc())};D.z=D.gO.prototype;D.z.Vd=function(a){return a.type==D.rk?this:(0,D.sk)(this,a,this.Fb.cs,D.k)};D.z.Je=function(a){return this.te[0]?this.te[0].I(a):new D.C(0,0,0,0)};D.z.Nj=function(){return this.te[0]?this.te[0].ya():D.o};D.z.ce=function(){this.Sb=D.k;this.te[0]&&(this.te[0]instanceof D.Ne?(0,D.vF)(this.te[0]):this.te[0].Za((0,D.tk)()))};
D.z.sc=function(){this.Sb=D.p;this.te[0]&&(this.te[0]instanceof D.Ne?(0,D.tF)(this.te[0]):this.te[0].ba(D.o))};D.z.xc=(0,D.y)("Sb");D.z.af=(0,D.y)("oi");D.z.Ie=(0,D.y)("Z5");D.z.Ki=function(){return this.hl.color};
D.dO={};D.A.q(D.dO,D.A,"DvtLegendRenderer");D.dO.Jya=5;D.dO.Kya=2;D.dO.Mha=0.6;D.dO.wha=10;D.dO.Zh=12;D.dO.iO=2;
D.dO.W=function(a,b){var c=a.v(),d=a.j(),e=(0,D.G)(d);c.isLayout||D.dO.Ut(a,b);var f=new D.KA(d,b.e,b.g),g=new D.F(d);f.fa.k(g);a.k(f);a.vqa=f;var h=(0,D.nO)(a,c.layout.outerGapWidth),j=(0,D.nO)(a,c.layout.outerGapHeight);b.x+=h;b.y+=j;b.e-=2*h;b.g-=2*j;a.h4(b);if(0>=b.e||0>=b.g)return new D.Eg(0,0);d=D.dO.IFa(a,g,new D.C(b.x,b.y,b.e,b.g));if(0==d.e||0==d.g)return new D.Eg(0,0);(0,D.LA)(f);d.g>b.g?(d.g=b.g,c._isScrollingLegend=D.k):c._isScrollingLegend=D.p;var l=f=0,m=c.hAlign!=D.o?c.hAlign:c.halign;
"center"==m?f=b.x-d.x+(b.e-d.e)/2:"end"==m&&(f=e?b.x-d.x:b.x-d.x+b.e-d.e);e=c.vAlign!=D.o?c.vAlign:c.valign;"middle"==e?l=b.y-d.y+(b.g-d.g)/2:"bottom"==e&&(l=b.y-d.y+b.g-d.g);e=new D.C(d.x+f-h,d.y+l-j,d.e+2*h,d.g+2*j);if(c.isLayout)return e;(f||l)&&(0,D.wk)(g,f,l);c=a.O$;for(g=0;g<c.length;g++)(0,D.Nn)(d,c[g].JLa,c[g].text,c[g].text.Nb().e);return e};
D.dO.IFa=function(a,b,c){var d=a.v();c=c.ea();var e=D.dO.OG(a,b,d.title,c,D.o,D.k);if(e){var f=e.Nb(),g=(0,D.nO)(a,d.layout.titleGapHeight);c.y+=f.g+g;c.g-=window.Math.floor(f.g+g)}a=D.dO.Poa(a,b,d.sections,c,[]);return e?(0,D.Go)(f,a):a};D.dO.Ut=function(a,b){var c=a.v(),d=c.backgroundColor,c=c.borderColor;if(d||c){var e=new D.Re(a.j(),b.x,b.y,b.e,b.g);d?e.va(d):(0,D.Ai)(e);c&&(e.Za(c),(0,D.Ii)(e));a.Ia().La(e,new D.Kj(D.o,D.o,D.o,{type:D.Rl.xI,id:D.i}));a.k(e)}};
D.dO.OG=function(a,b,c,d,e,f){var g=a.v(),h=b.j(),j=(0,D.G)(h);if(!c)return D.o;c=new D.Kf(h,c,d.x,d.y);h=g.titleStyle;e&&e.titleStyle?h=new D.I(e.titleStyle):e&&g._sectionTitleStyle&&(h=g._sectionTitleStyle);c.Na(h);return D.Ye.Yb(c,d.e,window.Infinity,b)?(j&&c.ka(d.x+d.e-c.Nb().e),g.isLayout?b.removeChild(c):(a.Ia().La(c,new D.Kj(c.No(),D.o,D.o,{type:D.Rl.Er,id:D.i})),f&&a.O$.push({text:c,JLa:e&&e.titleHalign?e.titleHalign:g.titleHalign})),c):D.o};
D.dO.Poa=function(a,b,c,d,e){var f=a.v();f.symbolWidth==D.o&&f.symbolHeight==D.o?(f.symbolWidth=D.dO.wha,f.symbolHeight=D.dO.wha):(f.symbolWidth==D.o?f.symbolWidth=f.symbolHeight:f.symbolHeight==D.o&&(f.symbolHeight=f.symbolWidth),f.symbolWidth=(0,window.parseInt)(f.symbolWidth),f.symbolHeight=(0,window.parseInt)(f.symbolHeight));for(var g=(0,D.nO)(a,f.layout.sectionGapHeight),h=(0,D.nO)(a,f.layout.titleGapHeight),j=(0,D.nO)(a,f.layout.sectionGapWidth),l=D.dO.XCa(a),f="vertical"!=f.orientation,m=
D.o,n=d.ea(),q,r=0;r<c.length;r++){var s=e.concat([r]),u="off"==c[r].expanded||c[r].expanded==D.p?h:g;f?(q=D.dO.Hoa(a,b,c[r],n,l),q.e>n.e?(n.e<d.e&&(d.y+=q.g+u,d.g-=q.g+u),q=q.e<=d.e?D.dO.Hoa(a,b,c[r],d,l):D.dO.Soa(a,b,c[r],d,l,s,D.k),d.y+=q.g+u,d.g-=q.g+u,n=d.ea()):(n.e-=q.e+j,(0,D.G)(a.j())||(n.x+=q.e+j))):(q=D.dO.Soa(a,b,c[r],d,l,s,D.p),d.y+=q.g+u,d.g-=q.g+u);m=m?(0,D.Go)(m,q):q}return m};
D.dO.ABa=function(a,b,c,d,e,f,g,h,j,l,m){var n=D.dO.K5(a,d,e+"Enabled",f,g),q=D.dO.K5(a,d,e+"Over",f,g);d=D.dO.K5(a,d,e+"Down",f,g);a=new D.Ne(a,n,q,d,D.o,j,l,m);b=(0,D.qO)([a],b,c,h,D.o,D.p);a.kd("button");(0,D.pO)(b);return a};D.dO.K5=function(a,b,c,d,e){var f=(0,D.G)(a)?"RTL":"";a=new D.Se(a,b[c+f]?b[c+f]:b[c],d,e,D.dO.Zh,D.dO.Zh);(0,D.Ai)(a);return a};
D.dO.Soa=function(a,b,c,d,e,f,g){if(c){var h=a.v(),j=(0,D.nO)(a,h.layout.symbolGapWidth),l=(0,D.nO)(a,h.layout.rowGap),m=(0,D.nO)(a,h.layout.columnGap),n=a.j(),q=(0,D.G)(n);d=d.ea();"off"!=h.scrolling&&(d.g=window.Infinity);var r,s="on"==c.collapsible||c.collapsible==D.k;if(s){r=q?d.x+d.e-D.dO.Zh:d.x;if(!h.isLayout){var u="off"==c.expanded||c.expanded==D.p,w=u?"closed":"open",u=(0,D.N)("DvtUtilBundle",u?"EXPAND":"COLLAPSE",D.o),x=a.Ia(),n=D.dO.ABa(n,a,c,h._resources,w,r,d.y,u,f,x.Hca,x);b.k(n)}r=
new D.C(r,d.y,D.dO.Zh,D.dO.Zh);n=(0,D.nO)(a,h.layout.symbolGapWidth);q||(d.x+=D.dO.Zh+n);d.e-=D.dO.Zh+n}s=(s=D.dO.OG(a,b,c.title,d,c,!s&&1>=f.length))?s.Nb():new D.C(q?d.x+d.e:d.x,d.y,0,0);s=r?(0,D.Go)(s,r):s;if(!c.items&&!c.sections||"off"==c.expanded||c.expanded==D.p)return s;0<s.g&&(n=(0,D.nO)(a,h.layout.titleGapHeight),d.y+=s.g+n,d.g-=s.g+n);c.sections&&(f=D.dO.Poa(a,b,c.sections,d,f),s=(0,D.Go)(s,f));if(!c.items)return s;n=D.dO.hBa(a,d,e,c.items,g);g=n.numCols;f=n.numRows;n=n.width;r=d.y;if(0==
f||0==g)return s;w=f*(e+l)-l;u=window.Math.min(g*(n+m)-m,d.e);s=(0,D.Go)(s,new D.C(q?d.x+d.e-u:d.x,d.y,u,w));if(h.isLayout)return s;h=n-h.symbolWidth-j;j=0;w=1;u=c.items.length;for(x=0;x<u&&!(D.dO.$O(a,b,c.items[x],d,h,e,x),d.y+=e+l,j++,j===f&&w!==g&&(d.y=r,d.e-=n+m,q||(d.x+=n+m),j=0,w++),j===f);x++);return s}};
D.dO.Hoa=function(a,b,c,d,e){if(c){var f=a.v(),g=f.symbolWidth,h=(0,D.nO)(a,f.layout.symbolGapWidth),j=(0,D.nO)(a,f.layout.columnGap),l=(0,D.nO)(a,f.layout.titleGapWidth),m=c.items.length,n=(0,D.G)(a.j()),q=d.ea(),r=D.dO.OG(a,b,c.title,d,c,D.p),s=r?r.Nb():new D.C(n?d.x+d.e:d.x,d.y,0,0);if(c.items)0<s.e&&(q.e-=s.e+l,n||(q.x+=s.e+l));else return s;var l=[],u=d.e-q.e,w,x;for(x=0;x<m;x++)w=c.items[x],w=window.Math.ceil(D.Ye.T_(a.j(),w.text,f.textStyle)),u+=w+g+h+j,l.push(w);0<m&&(u-=j);s=new D.C(n?d.x+
d.e-u:d.x,d.y,u,window.Math.max(e,s.g));if(f.isLayout||u>d.e)return b.removeChild(r),s;for(x=0;x<m;x++)w=c.items[x],D.dO.$O(a,b,w,q,l[x],e,x),d=l[x]+g+h,q.e-=d+j,n||(q.x+=d+j);return s}};
D.dO.hBa=function(a,b,c,d,e){for(var f=a.v(),g=0,h=0;h<d.length;h++){var j=D.Ye.T_(a.j(),d[h].text,f.textStyle);j>g&&(g=j)}var h=f.symbolWidth,l=(0,D.nO)(a,f.layout.symbolGapWidth),j=(0,D.nO)(a,f.layout.rowGap);a=(0,D.nO)(a,f.layout.columnGap);g=window.Math.ceil(h+l+g);e?(e=window.Math.min(window.Math.floor((b.e+a)/(g+a)),d.length),c=window.Math.min(window.Math.floor((b.g+j)/(c+j)),window.Math.ceil(d.length/e)),e=window.Math.ceil(d.length/c),c=window.Math.ceil(d.length/e)):window.Infinity==b.g?(e=
1,c=d.length):(c=window.Math.min(window.Math.floor((b.g+j)/(c+j)),d.length),e=window.Math.ceil(d.length/c),c=window.Math.ceil(d.length/e));b=window.Math.min(g,(b.e-a*(e-1))/e);return b<h?{width:0,numCols:0,numRows:0}:{width:b,numCols:e,numRows:c}};D.dO.XCa=function(a){var b=a.v(),c=new D.Kf(a.j(),"Test");c.Na(b.textStyle);c.Ff();c=D.Ye.Ph(c).g;a=b.symbolHeight+(0,D.nO)(a,b.layout.symbolGapHeight);return window.Math.ceil(window.Math.max(c,a))};
D.dO.$O=function(a,b,c,d,e,f){var g=a.v(),h=a.j(),j=(0,D.G)(h),l=g.symbolWidth,m=(0,D.nO)(a,g.layout.symbolGapWidth),n=j?d.x+d.e-l:d.x,q=j?d.x+d.e-l-m:d.x+l+m,r=D.dO.EBa(a,n,d.y,f,c),s=c.text,u;if(s&&(u=D.dO.FBa(b,e,s,g.textStyle)))u.ka(q),D.Ye.KR(u,d.y+f/2),j&&u.Mh();b.k(r);d=new D.Re(h,j?q-e-D.dO.iO:n-D.dO.iO,d.y-D.dO.iO,l+m+e+2*D.dO.iO,f+2*D.dO.iO);(0,D.Ai)(d);g=g.hideAndShowBehavior;"none"!=g&&"off"!=g&&d.setCursor("pointer");b.k(d);b=[d,r];u!=D.o&&b.push(u);u=(0,D.qO)(b,a,c,u!=D.o?u.No():D.o,
c.shortDesc,D.dO.NDa(a,c));D.dO.i0(D.dO.w_(c),a)&&r.lI(u.zb());if("none"!=g&&"off"!=g||c.shortDesc!=D.o)d.kd("img"),(0,D.pO)(u)};D.dO.NDa=function(a,b){return"on"==b.drilling?D.k:"off"==b.drilling?D.p:"on"==a.v().drilling};D.dO.FBa=function(a,b,c,d){c=new D.Kf(a.j(),c);c.Na(d);return c=D.Ye.Yb(c,b,window.Infinity,a)?c:D.o};
D.dO.EBa=function(a,b,c,d,e){var f=a.v();e.markerShape||(e.markerShape=f._markerShape);e.color||(e.color=f._color);e.lineWidth||(e.lineWidth=f._lineWidth);var g=f.symbolWidth,f=f.symbolHeight,h=c+d/2,j=b+g/2,l=e.type!=D.o?e.type:e.symbolType;"line"==l?(e.lineWidth=window.Math.min(e.lineWidth,D.dO.Jya),b=D.dO.Bja(a.j(),b,c,g,d,e)):"lineWithMarker"==l?(e.lineWidth=window.Math.min(e.lineWidth,D.dO.Kya),b=D.dO.Bja(a.j(),b,c,g,d,e),D.dO.i0(D.dO.w_(e),a)||b.k(D.dO.rW(a,j,h,g*D.dO.Mha,f*D.dO.Mha,e))):b=
"image"==l?D.dO.M5(a,b,c,g,f,d,e):D.dO.rW(a,j,h,g,f,e);return b};D.dO.M5=function(a,b,c,d,e,f,g){return new D.Se(a.j(),g.source,b,c+(f-e)/2,d,e)};D.dO.rW=function(a,b,c,d,e,f){var g=a.j(),h=a.v();a=f.markerShape;var j=f.markerColor?f.markerColor:f.color,l=f.pattern;l&&"none"!=l?(d=new D.fh(g,a,h.skin,0,0,d,e),d.P(new D.gh(l,j,"#FFFFFF")),(0,D.wk)(d,b,c)):(d=new D.fh(g,a,h.skin,b,c,d,e),d.va(j));f.borderColor&&d.Za(f.borderColor,D.o,f._borderWidth?f._borderWidth:1);"square"==a&&(0,D.Ii)(d);return d};
D.dO.Bja=function(a,b,c,d,e,f){c+=e/2;a=new D.Hi(a,b,c,b+d,c);b=new D.ig(f.color,1,f.lineWidth);f=f.lineStyle;"dashed"==f?b.Qk((0,D.jg)(f),"4,2,4"):"dotted"==f&&b.Qk((0,D.jg)(f),"2");a.ba(b);(0,D.Ii)(a);return a};D.dO.w_=function(a){var b=D.o;return b=a.categories&&0<a.categories.length?a.categories[0]:a.id?a.id:a.text};D.dO.i0=function(a,b){var c=b.v().hiddenCategories;return!c||0>=c.length?D.p:-1!==c.indexOf(a)};

  return D;
});