/**
 * Copyright (c) 2014, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(['./DvtToolkit'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.
  
  // Map the D namespace to dvt, which is used to provide access across partitions.
  var D = dvt;
  
D.AQ=function(a,b,c){this.Init(a,b,c)};(0,D.da)("DvtPictoChart",D.AQ);D.A.q(D.AQ,D.xj,"DvtPictoChart");D.AQ.newInstance=function(a,b,c){return new D.AQ(a,b,c)};D.AQ.prototype.Init=function(a,b,c){D.AQ.u.Init.call(this,a,b,c);this.Oa=new D.BQ(this);this.Oa.Ge(this);(0,D.Jf)()||(0,D.Cj)(this.Oa,new D.CQ(this.Oa));this.xf=new D.DQ;this.jb=[]};D.AQ.prototype.AC=function(a,b){if(!a||!b){var c=D.EQ.ql(this,a,b);this.r7=c;a||(a=c.gm?c.uqa*c.NZ:0);b||(b=c.gm?c.hua*c.Z0:0)}return new D.Eg(a,b)};
D.AQ.prototype.W=function(a,b,c){this.Yg=this.fa;var d=this.Dn,e=this.Ma?this.Ma:0,f=this.Xa?this.Xa:0;this.Oa.Lc();this.jb=[];this.Dn=[];this.r7=D.o;this.zn&&(this.fa.removeChild(this.zn),this.zn=D.o);this.fb&&this.fb.stop();this.Bd(a);var g=this.j();if(!b&&!c){if(g.Pa.style.display="block",b=this.AC(),D.E.HT(g,b.e,b.g),c=D.E.xba(g),b.e==c.e&&b.g!=c.g?(this.Xa=c.g,b=this.AC(D.o,this.Xa),D.E.HT(g,b.e,this.Xa),this.Ma=D.E.xba(g).e):b.e!=c.e&&b.g==c.g?(this.Ma=c.e,b=this.AC(this.Ma,D.o),D.E.HT(g,this.Ma,
b.g),this.Xa=D.E.xba(g).g):(this.Ma=c.e,this.Xa=c.g),this.Ma!=b.e||this.Xa!=b.g)this.r7=D.o}else this.Ma=b,this.Xa=c;this.fa=new D.F(g);this.k(this.fa);D.EQ.W(this,this.fa,new D.C(0,0,this.Ma,this.Xa),this.r7);if(this.Yg)"none"!=this.G.animationOnDataChange&&a&&(a=new D.Ym(g,D.o),(0,D.Zm)(a,d,this.Dn),this.fb=a.Xq());else{var h=this.G.animationOnDisplay,d=this.Ca();a=this.j();b=new D.C(0,0,this.Ma,this.Xa);if(D.kl.isSupported(h))d=D.kl.my(a,h,this.fa,b,d);else{c=[];if("popIn"==h)for(h=0;h<this.Dn.length;h++){var j=
this.Dn[h];c.push(new D.un(a,j,D.k,d))}else if("none"!=h){for(h=0;h<this.Dn.length;h++){var j=this.Dn[h],l=new D.vn(a,j,d),m,n;D.EQ.Ya(this)?(m=D.EQ.mca(this)?this.Ma:0,n=j.Ng(),j.Du(m),(0,D.T)(l.O,"typeNumber",j,j.Ng,j.Du,n)):(m=D.EQ.lca(this)?this.Xa:0,n=j.Og(),j.Eu(m),(0,D.T)(l.O,"typeNumber",j,j.Og,j.Eu,n));c.push(l)}c.push(D.kl.my(a,D.kl.Jw,this.fa,b,d))}d=0<c.length?new D.tn(a,c):D.o}this.fb=d}this.fb?(D.E.HT(g,window.Math.max(e,this.Ma),window.Math.max(f,this.Xa)),this.Oa.Oi(this),this.zn&&
this.fa.removeChild(this.zn),this.fb.pe(this.Mna,this),this.fb.play()):this.Mna();this.fo()};D.AQ.prototype.render=D.AQ.prototype.W;D.z=D.AQ.prototype;D.z.Bd=function(a){a?this.G=this.xf.fk(a):this.G||(this.G=(0,D.Ej)(this));(0,D.fl)()||(this.G.animationOnDisplay="none",this.G.animationOnDataChange="none");a=this.G.selectionMode;this.Qb="single"==a?new D.gl("s"):"multiple"==a?new D.gl("m"):D.o;this.Oa.Ku(this.Qb)};
D.z.Mna=function(){this.Yg&&(this.removeChild(this.Yg),this.Yg.X(),this.Yg=D.o);this.fb&&(this.fb=D.o,this.Oa.Ge(this),this.zn&&this.fa.k(this.zn));D.E.HT(this.j(),this.Ma,this.Xa);(0,D.Gj)(this.Oa,this.jb[0]);this.Qb&&(0,D.Ol)(this.Qb,this.G.selection,this.jb);(0,D.wl)(this.G.highlightedCategories,this.jb,"any"==this.G.highlightMatch)};D.z.xh=(0,D.y)("Oa");D.z.dda=(0,D.v)("jb");D.z.ri=(0,D.y)("jb");D.z.Ca=function(){return(0,D.np)(this.G.animationDuration)/1E3};
D.z.X=function(){this.Oa&&(this.Oa.Oi(this),this.Oa.X(),this.Oa=D.o);D.AQ.u.X.call(this)};D.AQ.prototype.destroy=D.AQ.prototype.X;D.AQ.prototype.Ke=function(a){var b=this.v();b.highlightedCategories=D.vl.ea(a);(0,D.wl)(a,this.ri(),"any"==b.highlightMatch)};D.AQ.prototype.highlight=D.AQ.prototype.Ke;D.AQ.prototype.select=function(a){this.v().selection=D.vl.ea(a);this.Qb&&(0,D.Ol)(this.Qb,a,this.ri())};D.AQ.prototype.select=D.AQ.prototype.select;
D.AQ.prototype.Uj=function(){return(0,D.uk)(this.v(),"componentName","DvtUtilBundle","PICTOCHART")};D.AQ.prototype.Pf=function(){this.yia||(this.yia=new D.FQ(this));return this.yia};D.AQ.prototype.getAutomation=D.AQ.prototype.Pf;
D.FQ=(0,D.v)("vg");(0,D.da)("DvtPictoChartAutomation",D.FQ);D.A.q(D.FQ,D.Ij,"DvtPictoChartAutomation");D.FQ.prototype.Dl=function(a){return(a=(0,D.Jj)(this.vg.xh(),a))&&a instanceof D.GQ?"item["+this.vg.ri().indexOf(a)+"]":D.o};D.FQ.prototype.Qf=function(a){if("tooltip"==a)return(0,D.hm)(this.vg);var b=a.indexOf("[");return 0<b&&"item"===a.substring(0,b)&&(a=(0,window.parseInt)(a.substring(b+1,a.length-1)),a=this.vg.ri()[a])?a.ya():D.o};D.FQ.prototype.getDomElementForSubId=D.FQ.prototype.Qf;
D.FQ.prototype.getItem=function(a){if(a=this.vg.ri()[a]){var b={};b.color=a.Ki();b.tooltip=a.Kc();b.id=a.getId();b.name=a.getName();b.count=a.getCount();b.selected=a.Ga();return b}return D.o};D.FQ.prototype.getItem=D.FQ.prototype.getItem;D.FQ.prototype.lM=function(){return this.vg.ri().length};D.FQ.prototype.getItemCount=D.FQ.prototype.lM;
D.BQ=function(a){this.Init(a.j(),a.kb,a);this.vg=a};D.A.q(D.BQ,D.Uj,"DvtPictoChartEventManager");D.z=D.BQ.prototype;D.z.tm=function(a,b,c){a=this.vg.v();"none"!=a.hoverBehavior&&(b=b.Tc?b.Tc():[],a.highlightedCategories=c?b.slice():D.o,c=new D.Fm(c?"categoryRollOver":"categoryRollOut",a.highlightedCategories),b=(0,D.np)(a.hoverBehaviorDelay),this.LB.Yd(c,this.vg.ri(),b,"any"==a.highlightMatch))};D.z.QI=function(a){(a=(0,D.Jj)(this,a.target))&&(!a.Ea||!a.Ea())&&this.Gs(a)};
D.z.Wy=function(a){(a=(0,D.Jj)(this,a.target))&&a.Ea&&a.Ea()&&this.Gs(a)};D.z.LN=function(a){(a=(0,D.Jj)(this,a.target))&&(!a.Ea||!a.Ea())&&this.Gs(a)};D.z.zr=function(a){(a=(0,D.Jj)(this,a.target))&&(!a.Ea||!a.Ea())&&this.Gs(a)};D.z.BB=function(a){(a=(0,D.Jj)(this,a.target))&&a.Ea&&a.Ea()&&this.Gs(a)};D.z.Gs=function(a){a instanceof D.GQ&&a.eh()&&this.jh(new D.Zj(a.getId()))};
D.DQ=function(){this.Init({alta:D.HQ})};D.A.q(D.DQ,D.Sj,"DvtPictoChartDefaults");
D.HQ={animationOnDisplay:"none",animationOnDataChange:"none",animationDuration:750,drilling:"off",hiddenCategories:[],highlightedCategories:[],highlightMatch:"all",hoverBehavior:"none",hoverBehaviorDelay:200,layout:"horizontal",layoutOrigin:"topStart",selection:[],selectionMode:"none",_defaultColor:"#a6acb1",_defaultSize:32,_defaultShape:"rectangle",_gapRatio:0.25,_textStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; color: #252525;"),_statusMessageStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; color: #252525;"),
_tooltipStyle:new D.I("border-collapse: separate; border-spacing: 1px"),_tooltipLabelStyle:new D.I("color: #737373; padding: 0px 2px"),_tooltipValueStyle:new D.I("color: #333333; padding: 0px 2px")};
D.IQ=function(a,b,c,d,e,f,g,h,j,l){D.IQ.u.Init.call(this,a.j(),b,c,d,e,f,g,h,j,l);this.vg=a};D.A.q(D.IQ,D.eh,"DvtPictoChartImageMarker");D.z=D.IQ.prototype;D.z.hf=function(a,b){var c=new D.vn(this.j(),this,0.75*this.vg.Ca()),d=c.O,e=this.dl();this.Pm(b.dl());(0,D.T)(d,"typeNumberArray",this,this.dl,this.Pm,e);b.D(0);a.add(c,1)};D.z.vh=function(a){a.add(new D.xn(this.j(),this,0.5*this.vg.Ca()),0)};D.z.yg=function(a){this.D(0);a.add(new D.an(this.j(),this,0.5*this.vg.Ca()),2)};
D.z.dl=function(){return[this.Ng(),this.Og(),this.getWidth(),this.getHeight()]};D.z.Pm=function(a){this.Du(a[0]);this.Eu(a[1]);this.ra(a[2]);this.Ha(a[3])};
D.GQ=function(a,b){this.Init(a,b)};D.A.q(D.GQ,D.F,"DvtPictoChartItem");D.JQ=0;D.GQ.prototype.Init=function(a,b){D.GQ.u.Init.call(this,a.j(),D.o,b.id);this.vg=a;this.hl=b;this.ib=b.id!=D.o?b.id:b.name!=D.o?b.name:"_defaultId"+D.JQ;D.JQ++;this.Sb=this.gi=D.p;this.$la=new D.H(0,0);(this.Ea()||this.eh())&&this.setCursor("pointer");a.xh().La(this,this)};D.KQ=function(a){a=a.hl.columnSpan;return a!=D.o&&0<=a?a:1};D.LQ=function(a){a=a.hl.rowSpan;return a!=D.o&&0<=a?a:1};D.z=D.GQ.prototype;
D.z.getCount=function(){var a=this.hl.count;return a!=D.o?window.Math.max(a,0):1};D.z.Ab=function(){return this.hl.shape||this.vg.v()._defaultShape};D.z.zb=function(){return this.hl.color||this.vg.v()._defaultColor};D.z.Fk=function(){return this.hl.borderColor};D.z.bh=function(){return this.hl.borderWidth};D.z.xS=function(){return this.hl.source};D.z.Iba=function(){return this.hl.sourceSelected};D.z.Gba=function(){return this.hl.sourceHover};D.z.Hba=function(){return this.hl.sourceHoverSelected};
D.z.getName=function(){return this.hl.name};D.z.getId=(0,D.y)("ib");D.z.Kc=function(){return this.hl.shortDesc};D.z.eh=function(){var a=this.hl.drilling;return a&&"inherit"!=a?"on"==a:"on"==this.vg.v().drilling};D.z.Qh=function(){return this.Ea()&&this.eh()};
D.z.Ie=function(){var a=this.vg.v(),b=this.vg.v().tooltip;if(b){var a=this.vg.j().cd(),c={id:this.getId(),name:this.getName(),count:this.getCount(),color:this.zb()};return(0,D.op)(a,b,c)}if(this.Kc()!=D.o)return this.Kc();b="";(c=this.getName())&&(b=(0,D.pp)("td",a._tooltipLabelStyle)+c+"\x3c/td\x3e");c=(0,D.G)(this.vg.j());a._tooltipLabelStyle.ca("text-align",c?"left":"right");a._tooltipValueStyle.ca("text-align",c?"right":"left");return(0,D.pp)("table",a._tooltipStyle)+"\x3ctr\x3e"+b+(0,D.pp)("td",
a._tooltipValueStyle)+(0,D.MQ)(this)+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"};D.z.Ki=function(){return this.zb()};D.MQ=function(a){var b=a.vg.v(),c=a.getCount();a=a.vg;for(var d=0,e=0;e<a.jb.length;e++)d+=a.jb[e].getCount();return(0,D.uk)(b,"labelCountWithTotal","DvtUtilBundle","COUNT_WITH_TOTAL",[c,d])};D.z=D.GQ.prototype;D.z.Ea=function(){return"none"!=this.vg.v().selectionMode};D.z.Ga=(0,D.y)("gi");
D.z.qb=function(a){this.gi=a;this.Qq();for(var b=0;b<this.Qa();b++){var c=this.na(b);(c instanceof D.NQ||c instanceof D.IQ)&&c.qb(a)}};D.z.Xb=function(){for(var a=0;a<this.Qa();a++){var b=this.na(a);(b instanceof D.NQ||b instanceof D.IQ)&&b.Xb()}};D.z.Mb=function(){for(var a=0;a<this.Qa();a++){var b=this.na(a);(b instanceof D.NQ||b instanceof D.IQ)&&b.Mb()}};D.z.hd=function(){return[this]};
D.z.oc=function(){var a=[],b=this.vg.v();this.Ea()&&a.push((0,D.uk)(b,this.Ga()?"stateSelected":"stateUnselected","DvtUtilBundle",this.Ga()?"STATE_SELECTED":"STATE_UNSELECTED"));this.eh()&&a.push((0,D.uk)(b,"stateDrillable","DvtUtilBundle","STATE_DRILLABLE"));b=this.getName();b=this.Kc()!=D.o?this.Kc():b==D.o?(0,D.MQ)(this):(0,D.N)("DvtUtilBundle","COLON_SEP_LIST",[b,(0,D.MQ)(this)]);return(0,D.vk)(b,a)};D.z.Qq=function(){(0,D.af)()||this.Rb("label",this.oc())};
D.z.Tc=function(){return this.hl.categories||[this.getId()]};D.z.Vd=function(a){var b=this.vg.xh().$f;if(a.type==D.rk||b.hr(a))a=this;else if(b.Bg(a)){var b=this.vg,c=D.EQ.mca(b),d=D.EQ.lca(b);a=37==a.keyCode&&c||39==a.keyCode&&!c||38==a.keyCode&&d||40==a.keyCode&&!d;b=b.ri();a=b.indexOf(this)+(a?1:-1);a=a<b.length&&0<=a?b[a]:this}else a=D.o;return a};D.z.Je=function(a){return this.I(a)};D.z.Nj=function(){return this.ya()};D.z.ce=function(){this.Sb=D.k;this.Xb()};D.z.sc=function(){this.Sb=D.p;this.Mb()};
D.z.xc=(0,D.y)("Sb");D.z.nba=(0,D.y)("$la");
D.CQ=function(a){this.Init(a)};D.A.q(D.CQ,D.qk,"DvtPictoChartKeyboardHandler");D.CQ.prototype.By=function(a){return this.Bg(a)&&!a.ctrlKey};D.CQ.prototype.hr=function(a){return 32==a.keyCode&&a.ctrlKey};D.CQ.prototype.Sh=function(a){var b=this.ha.od();return b&&13==a.keyCode?(this.ha.Gs(b),(0,D.ki)(a),b):D.CQ.u.Sh.call(this,a)};
D.NQ=function(a,b,c,d,e,f,g){D.NQ.u.Init.call(this,a.j(),b,"alta",c,d,e,f,D.k,g);this.vg=a};D.A.q(D.NQ,D.fh,"DvtPictoChartShapeMarker");D.z=D.NQ.prototype;D.z.hf=function(a,b){var c=new D.vn(this.j(),this,0.75*this.vg.Ca()),d=c.O,e=this.Zb();this.P(b.Zb().ea());(0,D.T)(d,"typeFill",this,this.Zb,this.P,e);e=this.dl();this.Pm(b.dl());(0,D.T)(d,"typeNumberArray",this,this.dl,this.Pm,e);b.D(0);a.add(c,1)};D.z.vh=function(a){a.add(new D.xn(this.j(),this,0.5*this.vg.Ca()),0)};
D.z.yg=function(a){this.D(0);a.add(new D.an(this.j(),this,0.5*this.vg.Ca()),2)};D.z.dl=function(){return[this.Ng(),this.Og(),this.getWidth(),this.getHeight()]};D.z.Pm=function(a){this.Du(a[0]);this.Eu(a[1]);this.ra(a[2]);this.Ha(a[3])};
D.EQ={};D.A.q(D.EQ,D.A,"DvtPictoChartRenderer");
D.EQ.W=function(a,b,c,d){var e=a.j(),f=new D.Re(e,c.x,c.y,c.e,c.g);(0,D.Ai)(f);b.k(f);d||(d=D.EQ.ql(a,c.e,c.g));if(d.gm){a.dda(d.gm);for(var f=a.v()._gapRatio,g=D.EQ.Ya(a),h=D.EQ.lca(a),j=D.EQ.mca(a),l=new D.zl,m=0,n=0,q=0,r=0;r<d.gm.length;r++){for(var s=d.gm[r],u=(0,D.KQ)(s),w=(0,D.LQ)(s),x=u*d.NZ,D$=w*d.Z0,Q=s.getCount(),M=0,L=D.k,W;0<Q;){if(u!=m||w!=n)q=0;0==q&&(W=D.EQ.uka(l,u,w,d.uqa,d.hua,g));if(W==D.o)break;var O=W.maa*d.NZ+x/2,ca=W.pT*d.Z0+D$/2,O=c.x+(j?c.e-O:O),qa=c.y+(h?c.g-ca:ca),ca=window.Math.min(1-
q,Q),Ja,jb,La,Db;g?(Ja=O-x/2,jb=h?qa+D$*(0.5-ca-q):qa+D$*(q-0.5),La=x,Db=D$*ca):(Ja=j?O+x*(0.5-ca-q):O+x*(q-0.5),jb=qa-D$/2,La=x*ca,Db=D$);var fb;1==ca?(fb=s.getId()+"_"+M,M++):fb=window.Math.random();if(s.xS())fb=new D.IQ(a,O,qa,x,D$,s.xS(),s.Iba(),s.Gba(),s.Hba(),fb+"_I");else{var sb=new D.Re(e,Ja,jb,La,Db);(0,D.Ai)(sb);s.k(sb);fb=new D.NQ(a,s.Ab(),O,qa,x-d.NZ*f,D$-d.Z0*f,fb+"_S");fb.va(s.zb());fb.Za(s.Fk(),D.o,s.bh());fb.kI(s.zb())}1>ca&&(sb=new D.wg,(0,D.yg)(sb,Ja,jb,La,Db),(0,D.zg)(fb,sb));L&&
(L=new D.H(O,qa),s.$la=L,L=D.p);s.k(fb);a.Dn.push(fb);Q-=ca;q=(q+ca)%1}b.k(s);m=s;m.kd("img");m.Qq();m=u;n=w}}else D.EQ.cn(a,b,c)};
D.EQ.ql=function(a,b,c){var d=a.v(),e=d.items;if(!e)return{};for(var f=D.$f.kH(d.hiddenCategories),g=[],h=0,j=1,l=1,m=0;m<e.length;m++)if(e[m]!=D.o){var n=new D.GQ(a,e[m]);if(!f||!D.$f.HM(f,n.Tc())){var q=(0,D.KQ)(n),r=(0,D.LQ)(n);q>j&&(j=q);r>l&&(l=r);h+=q*r*n.getCount();g.push(n)}}if(0==h)return{};e=d.columnWidth;f=d.rowHeight;if(!b||!c)e||(e=f?f:d._defaultSize),f||(f=e);a=D.EQ.Ya(a);m=d.columnCount;d=d.rowCount;!m&&!d&&(b&&c?a?d=D.EQ.zJ(window.Math.sqrt(h*c/b),l):m=D.EQ.zJ(window.Math.sqrt(h*b/
c),j):b?m=window.Math.max(window.Math.floor(b/e),1):c?d=window.Math.max(window.Math.floor(c/f),1):a?d=D.EQ.zJ(window.Math.sqrt(h),l):m=D.EQ.zJ(window.Math.sqrt(h),j));m?d||(d=D.EQ.zJ(h/m,l)):m=D.EQ.zJ(h/d,j);b&&c&&(e||(e=f?f:window.Math.min(b/m,c/d)),f||(f=e));return 0>=m||0>=d||0>=e||0>=f?{}:{gm:g,uqa:m,hua:d,NZ:e,Z0:f}};D.EQ.zJ=function(a,b){return window.Math.ceil(a/b)*b};
D.EQ.uka=function(a,b,c,d,e,f){if(f)return(a=D.EQ.uka(a,c,b,e,d,D.p))?{maa:a.pT,pT:a.maa}:D.o;for(f=0;f<e-c+1;f++)for(var g=0;g<d-b+1;g++)if(D.EQ.zAa(a,g,f,b,c))return D.EQ.yEa(a,g,f,b,c),{maa:g,pT:f};return D.o};D.EQ.zAa=function(a,b,c,d,e){for(var f=0;f<e;f++)for(var g=0;g<d;g++)if(a.get(b+g,c+f))return D.p;return D.k};D.EQ.yEa=function(a,b,c,d,e){for(var f=0;f<e;f++)for(var g=0;g<d;g++)a.put(b+g,c+f,D.k)};
D.EQ.cn=function(a,b,c){var d=a.v(),e=(0,D.uk)(d,"labelNoData","DvtUtilBundle","NO_DATA");b=D.Ye.cn(b,e,c.ea(),a.xh(),d._statusMessageStyle);a.zn=b};D.EQ.Ya=function(a){return"vertical"==a.v().layout};D.EQ.lca=function(a){a=a.v().layoutOrigin;return"bottomStart"==a||"bottomEnd"==a};D.EQ.mca=function(a){var b=a.v().layoutOrigin,b="topEnd"==b||"bottomEnd"==b;return(0,D.G)(a.j())?!b:b};

  return D;
});